<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/zackiles/elasticsearch-odm#readme">elasticsearch-odm (v1.1.0)</a>
</h1>
<h4>Like Mongoose but for Elasticsearch. Define models, preform CRUD operations, and build advanced search queries.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm">module elasticsearch-odm</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.Schema">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>Schema
            <span class="apidocSignatureSpan">(schema, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.Schema.prototype.post">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>Schema.prototype.post
            <span class="apidocSignatureSpan">(name, func)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.Schema.prototype.pre">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>Schema.prototype.pre
            <span class="apidocSignatureSpan">(name, func)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.Schema.prototype.toMapping">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>Schema.prototype.toMapping
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.Schema.prototype.validate">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>Schema.prototype.validate
            <span class="apidocSignatureSpan">(doc, partial)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.connect">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>connect
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.createIndex">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>createIndex
            <span class="apidocSignatureSpan">(index, mappings)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.errors">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>errors
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.isConnected">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>isConnected
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.model">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>model
            <span class="apidocSignatureSpan">(modelName, schema)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.removeIndex">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>removeIndex
            <span class="apidocSignatureSpan">(index)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.stats">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>stats
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.status">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>status
            <span class="apidocSignatureSpan">(type)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.</span>Schema.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.</span>client</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.</span>default_methods</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.</span>logger</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.</span>model.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.</span>query</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.</span>schema_types</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.</span>utils</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.Schema">module elasticsearch-odm.Schema</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.Schema.Schema">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>Schema
            <span class="apidocSignatureSpan">(schema, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.Schema.prototype">module elasticsearch-odm.Schema.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.Schema.prototype.post">
            function <span class="apidocSignatureSpan">elasticsearch-odm.Schema.prototype.</span>post
            <span class="apidocSignatureSpan">(name, func)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.Schema.prototype.pre">
            function <span class="apidocSignatureSpan">elasticsearch-odm.Schema.prototype.</span>pre
            <span class="apidocSignatureSpan">(name, func)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.Schema.prototype.toMapping">
            function <span class="apidocSignatureSpan">elasticsearch-odm.Schema.prototype.</span>toMapping
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.Schema.prototype.validate">
            function <span class="apidocSignatureSpan">elasticsearch-odm.Schema.prototype.</span>validate
            <span class="apidocSignatureSpan">(doc, partial)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.Schema.prototype.post">module elasticsearch-odm.Schema.prototype.post</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.Schema.prototype.post.post">
            function <span class="apidocSignatureSpan">elasticsearch-odm.Schema.prototype.</span>post
            <span class="apidocSignatureSpan">(name, func)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.Schema.prototype.pre">module elasticsearch-odm.Schema.prototype.pre</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.Schema.prototype.pre.pre">
            function <span class="apidocSignatureSpan">elasticsearch-odm.Schema.prototype.</span>pre
            <span class="apidocSignatureSpan">(name, func)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.Schema.prototype.toMapping">module elasticsearch-odm.Schema.prototype.toMapping</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.Schema.prototype.toMapping.toMapping">
            function <span class="apidocSignatureSpan">elasticsearch-odm.Schema.prototype.</span>toMapping
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.Schema.prototype.validate">module elasticsearch-odm.Schema.prototype.validate</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.Schema.prototype.validate.validate">
            function <span class="apidocSignatureSpan">elasticsearch-odm.Schema.prototype.</span>validate
            <span class="apidocSignatureSpan">(doc, partial)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.client">module elasticsearch-odm.client</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.client.makeClient">
            function <span class="apidocSignatureSpan">elasticsearch-odm.client.</span>makeClient
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.connect">module elasticsearch-odm.connect</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.connect.connect">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>connect
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.createIndex">module elasticsearch-odm.createIndex</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.createIndex.createIndex">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>createIndex
            <span class="apidocSignatureSpan">(index, mappings)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.default_methods">module elasticsearch-odm.default_methods</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.default_methods.count">
            function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>count
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.default_methods.create">
            function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>create
            <span class="apidocSignatureSpan">(data, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.default_methods.find">
            function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>find
            <span class="apidocSignatureSpan">(match, queryOptions)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.default_methods.findAndRemove">
            function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>findAndRemove
            <span class="apidocSignatureSpan">(match, queryOptions, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.default_methods.findById">
            function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>findById
            <span class="apidocSignatureSpan">(id, queryOptions)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.default_methods.findByIds">
            function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>findByIds
            <span class="apidocSignatureSpan">(ids, queryOptions)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.default_methods.findOne">
            function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>findOne
            <span class="apidocSignatureSpan">(match, queryOptions)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.default_methods.findOneAndRemove">
            function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>findOneAndRemove
            <span class="apidocSignatureSpan">(match, queryOptions, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.default_methods.makeInstance">
            function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>makeInstance
            <span class="apidocSignatureSpan">(documents)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.default_methods.remove">
            function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>remove
            <span class="apidocSignatureSpan">(id, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.default_methods.removeByIds">
            function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>removeByIds
            <span class="apidocSignatureSpan">(ids)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.default_methods.search">
            function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>search
            <span class="apidocSignatureSpan">(queryOptions, query)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.default_methods.set">
            function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>set
            <span class="apidocSignatureSpan">(id, document, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.default_methods.toMapping">
            function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>toMapping
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.default_methods.update">
            function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>update
            <span class="apidocSignatureSpan">(id, data, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.errors">module elasticsearch-odm.errors</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.errors.errors">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>errors
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.errors.ConnectionError">
            function <span class="apidocSignatureSpan">elasticsearch-odm.errors.</span>ConnectionError
            <span class="apidocSignatureSpan">(host)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.errors.MissingArgumentError">
            function <span class="apidocSignatureSpan">elasticsearch-odm.errors.</span>MissingArgumentError
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.errors.ValidationError">
            function <span class="apidocSignatureSpan">elasticsearch-odm.errors.</span>ValidationError
            <span class="apidocSignatureSpan">(instance, errors)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.errors.ValidatorError">
            function <span class="apidocSignatureSpan">elasticsearch-odm.errors.</span>ValidatorError
            <span class="apidocSignatureSpan">(property, reason)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.errors.super_">
            function <span class="apidocSignatureSpan">elasticsearch-odm.errors.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.isConnected">module elasticsearch-odm.isConnected</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.isConnected.isConnected">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>isConnected
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.logger">module elasticsearch-odm.logger</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>emitErrs</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>exitOnError</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>padLevels</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>stripColors</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.logger.catchExceptions">
            function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>catchExceptions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.logger.debug">
            function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>debug
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.logger.error">
            function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>error
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.logger.info">
            function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>info
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.logger.silly">
            function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>silly
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.logger.trace">
            function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>trace
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.logger.verbose">
            function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>verbose
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.logger.warn">
            function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>warn
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.logger.warning">
            function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>warning
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>_eventsCount</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>_events</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>_hnames</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>_names</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>domain</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>exceptionHandlers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>filters</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>levels</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>profilers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>rewriters</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>transports</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>level</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.model">module elasticsearch-odm.model</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.model.model">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>model
            <span class="apidocSignatureSpan">(modelName, schema)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.model.prototype">module elasticsearch-odm.model.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.model.prototype.execPostHook">
            function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>execPostHook
            <span class="apidocSignatureSpan">(name, context)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.model.prototype.execPreHook">
            function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>execPreHook
            <span class="apidocSignatureSpan">(name, context)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.model.prototype.remove">
            function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>remove
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.model.prototype.save">
            function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>save
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.model.prototype.set">
            function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>set
            <span class="apidocSignatureSpan">(data, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.model.prototype.toJSON">
            function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.model.prototype.toObject">
            function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>toObject
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.model.prototype.update">
            function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>update
            <span class="apidocSignatureSpan">(data, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.model.prototype.validate">
            function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>validate
            <span class="apidocSignatureSpan">(doc, partial)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.query">module elasticsearch-odm.query</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.query.QueryPromise">
            function <span class="apidocSignatureSpan">elasticsearch-odm.query.</span>QueryPromise
            <span class="apidocSignatureSpan">(query, func)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.query.addExistenceFilters">
            function <span class="apidocSignatureSpan">elasticsearch-odm.query.</span>addExistenceFilters
            <span class="apidocSignatureSpan">(req, missingFilters, existsFilters)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.query.addPagination">
            function <span class="apidocSignatureSpan">elasticsearch-odm.query.</span>addPagination
            <span class="apidocSignatureSpan">(req, page, per_page)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.query.addPopulations">
            function <span class="apidocSignatureSpan">elasticsearch-odm.query.</span>addPopulations
            <span class="apidocSignatureSpan">(req, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.query.addSorts">
            function <span class="apidocSignatureSpan">elasticsearch-odm.query.</span>addSorts
            <span class="apidocSignatureSpan">(req, sorts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.query.addTermFilters">
            function <span class="apidocSignatureSpan">elasticsearch-odm.query.</span>addTermFilters
            <span class="apidocSignatureSpan">(req, mustFilters, notFilters)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.query.parseRequest">
            function <span class="apidocSignatureSpan">elasticsearch-odm.query.</span>parseRequest
            <span class="apidocSignatureSpan">(indices, types, matches, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.query.parseResponse">
            function <span class="apidocSignatureSpan">elasticsearch-odm.query.</span>parseResponse
            <span class="apidocSignatureSpan">(options, query, res)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.removeIndex">module elasticsearch-odm.removeIndex</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.removeIndex.removeIndex">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>removeIndex
            <span class="apidocSignatureSpan">(index)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.schema_types">module elasticsearch-odm.schema_types</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.schema_types.BinaryType">
            function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>BinaryType
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.schema_types.BooleanType">
            function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>BooleanType
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.schema_types.ByteType">
            function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>ByteType
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.schema_types.DateType">
            function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>DateType
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.schema_types.DoubleType">
            function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>DoubleType
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.schema_types.FloatType">
            function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>FloatType
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.schema_types.GeoPointType">
            function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>GeoPointType
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.schema_types.IntegerType">
            function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>IntegerType
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.schema_types.LongType">
            function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>LongType
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.schema_types.ObjectType">
            function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>ObjectType
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.schema_types.ShortType">
            function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>ShortType
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.schema_types.StringType">
            function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>StringType
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.stats">module elasticsearch-odm.stats</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.stats.stats">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>stats
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.status">module elasticsearch-odm.status</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.status.status">
            function <span class="apidocSignatureSpan">elasticsearch-odm.</span>status
            <span class="apidocSignatureSpan">(type)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.elasticsearch-odm.utils">module elasticsearch-odm.utils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils._errnoException">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>_errnoException
            <span class="apidocSignatureSpan">(err, syscall, original)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils._exceptionWithHostPort">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>_exceptionWithHostPort
            <span class="apidocSignatureSpan">(err, syscall, address, port, additional)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils._extend">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>_extend
            <span class="apidocSignatureSpan">(target, source)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.debug">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>debug
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.debuglog">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>debuglog
            <span class="apidocSignatureSpan">(set)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.deprecate">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>deprecate
            <span class="apidocSignatureSpan">(fn, msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.error">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>error
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.escapeQueryStringQuery">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>escapeQueryStringQuery
            <span class="apidocSignatureSpan">(query)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.forAll">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>forAll
            <span class="apidocSignatureSpan">(obj, callback, currentPath)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.format">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>format
            <span class="apidocSignatureSpan">(f)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.inRange">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>inRange
            <span class="apidocSignatureSpan">(v, min, max)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.inherits">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>inherits
            <span class="apidocSignatureSpan">(ctor, superCtor)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.inspect">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>inspect
            <span class="apidocSignatureSpan">(obj, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isArray">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isArray
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isBase64">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isBase64
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isBoolean">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isBoolean
            <span class="apidocSignatureSpan">(arg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isBuffer">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isBuffer
            <span class="apidocSignatureSpan">(b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isByte">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isByte
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isDate">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isDate
            <span class="apidocSignatureSpan">(d)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isError">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isError
            <span class="apidocSignatureSpan">(e)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isFloat">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isFloat
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isFunction">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isFunction
            <span class="apidocSignatureSpan">(arg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isISO8601">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isISO8601
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isInteger">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isInteger
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isLong">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isLong
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isNull">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isNull
            <span class="apidocSignatureSpan">(arg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isNullOrUndefined">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isNullOrUndefined
            <span class="apidocSignatureSpan">(arg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isNumber">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isNumber
            <span class="apidocSignatureSpan">(arg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isObject">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isObject
            <span class="apidocSignatureSpan">(arg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isPrimitive">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isPrimitive
            <span class="apidocSignatureSpan">(arg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isRegExp">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isRegExp
            <span class="apidocSignatureSpan">(re)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isShort">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isShort
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isString">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isString
            <span class="apidocSignatureSpan">(arg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isSymbol">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isSymbol
            <span class="apidocSignatureSpan">(arg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.isUndefined">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isUndefined
            <span class="apidocSignatureSpan">(arg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.log">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>log
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.print">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>print
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.elasticsearch-odm.utils.puts">
            function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>puts
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm" id="apidoc.module.elasticsearch-odm">module elasticsearch-odm</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.Schema" id="apidoc.element.elasticsearch-odm.Schema">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>Schema
        <span class="apidocSignatureSpan">(schema, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Schema(schema, options) {
  this.fields = {};
  this.methods = {};
  this.statics = {};
  if(schema) this.fields = buildFieldsFromSchema(schema).fields;

  this.hooks = new Kareem();


  Object.defineProperty(this, 'options', {
    value: _.merge({}, options),
    configurable: false,
    writable: false
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  });
});
```
Example (using a [schema](#schemas)):

```js
var elasticsearch = require('elasticsearch-odm');
var carSchema = new elasticsearch.<span class="apidocCodeKeywordSpan">Schema</span>({
  type: String,
  color: {type: String, required: true}
});
var Car = elasticsearch.model('Car', carSchema);
```
## API Reference
- [Core](#core)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.Schema.prototype.post" id="apidoc.element.elasticsearch-odm.Schema.prototype.post">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>Schema.prototype.post
        <span class="apidocSignatureSpan">(name, func)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Schema.prototype.post = function (name, func) {
  this.hooks.post.apply(this.hooks, arguments);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.Schema.prototype.pre" id="apidoc.element.elasticsearch-odm.Schema.prototype.pre">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>Schema.prototype.pre
        <span class="apidocSignatureSpan">(name, func)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Schema.prototype.pre = function (name, func) {
  this.hooks.pre.apply(this.hooks, arguments);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.Schema.prototype.toMapping" id="apidoc.element.elasticsearch-odm.Schema.prototype.toMapping">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>Schema.prototype.toMapping
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Schema.prototype.toMapping = function () {
  var properties = {};

  var checkLeaf = function(obj, path){
    _.forOwn(obj, function(v, k){
      var currentPath = path ? path + '.' + k : k;
      if(v.type){
        var field = {type: v.type.esType};
        // we extend the type definition with any user supplied options.
        // these options can be any options listed for Elasticsearch Core Types.
        // see https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-core-types.html
        var defaults = {};

        // NOTE: This is opinionated. Setting to not_analyzed doesn't
        // allow full text search. But since we are trying to be like Mongoose
        // we assume this is most helpful to users as a default. This option
        // can still be overridden in the schema.
        if(v.type.jsType === String) defaults.index = 'not_analyzed';

        _.assign(field, defaults, v.options);
        dot.str(currentPath, field, properties);
      }else{
        // If there is no type, then this is a nested object.
        // Build an Elasticsearch object mapping with nested properties.
        dot.str(currentPath, {type: 'object'}, properties);
        checkLeaf(v, currentPath + '.properties');
      }
    });
  };

  checkLeaf(this.fields);

  return {
    properties: properties
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.Schema.prototype.validate" id="apidoc.element.elasticsearch-odm.Schema.prototype.validate">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>Schema.prototype.validate
        <span class="apidocSignatureSpan">(doc, partial)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Schema.prototype.validate = function (doc, partial) {
  var errs = [];
  var self = this;

  var compareWithOptions = function(field, fieldType, path){
    if(field){
      if(fieldType.type.compare(field) === false){
        errs.push(new ValidatorError(path, "Value '" + field + "' Not of type '" + fieldType.type.esType + '".'));
      }
    }else{
      if(fieldType.options.required &amp;&amp; !partial){
        errs.push(new ValidatorError(path, 'Required field is missing.'));
      }
    }
  };

  var checkType = function(fieldType, path){
    var docField = dot.pick(path, doc);
    // check if it's an array of items or a single value.
    // check all elements in the array if so.
    if(_.isArray(docField)){
      _.forEach(docField, function(v){
        compareWithOptions(v, fieldType, path);
      });
    }else{
      compareWithOptions(docField, fieldType, path);
    }
  };

  var checkLeaf = function(obj, path){
    _.forOwn(obj, function(v, k){
      // build a dot notation path to be used with 'dot-object'
      var currentPath = path ? path + '.' + k : k;

      // if a leaf contains a type property, then it's a type definition
      // otherwise it's a nested document.
      if(v.type){
        if(_.isPlainObject(v.type) &amp;&amp; v.type.type){
          currentPath = currentPath + '.type';
          v = v.type;
        }
        checkType(v, currentPath);
      }else{
        checkLeaf(v, currentPath);
      }
    });
  };

  checkLeaf(self.fields);

  if(errs.length){
    return new ValidationError(self, errs);
  }else{
    void 0;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.connect" id="apidoc.element.elasticsearch-odm.connect">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>connect
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function connect(options){
  if(isConnected()) return Promise.resolve();

  // can pass just the index name, or a client configuration object.
  if(_.isString(options)){
    db.index = options;
  }else if(_.isObject(options)){
    if(!options.index) return Promise.reject(new MissingArgumentError('options.index'));
    if(options.hasOwnProperty('syncMapping')){
      syncMapping = options.syncMapping;
      delete options.syncMapping;
    }
    db = _.assign(db, options);
  }else{
    return Promise.reject(new MissingArgumentError('options'));
  }

  module.exports.client = db.client = Client.makeClient(db);

  return db.client.indices.exists({index: db.index}).then(function(result){
    //No error - connected
    CONNECTED = true;

    if(result){
      return handleMappingQueue();
    }else{
      // if the index doesn't exist, then create it.
      return createIndex(db.index).then(handleMappingQueue);
    }
  })
  .then(function(results){
    return Promise.resolve();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```js
var elasticsearch = require('elasticsearch-odm');
var Car = elasticsearch.model('Car');
var car = new Car({
  type: 'Ford', color: 'Black'
});
elasticsearch.<span class="apidocCodeKeywordSpan">connect</span>('my-index').then(function(){
  // be sure to call connect before bootstrapping your app.
  car.save().then(function(document){
    console.log(document);
  });
});
```
Example (using a [schema](#schemas)):
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.createIndex" id="apidoc.element.elasticsearch-odm.createIndex">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>createIndex
        <span class="apidocSignatureSpan">(index, mappings)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createIndex(index, mappings){
  if(!index) return Promise.reject(new MissingArgumentError('index'));
  if(!isConnected()) return Promise.reject(new ConnectionError(db.host));

  return db.client.indices.create({
    index: index,
    body: mappings || defaultMappings
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
## API Reference
- [Core](#core)
- [`.connect(String/Object options)`](#connectstringobject-options---promise)
- [`new Schema(Object options)`](#new-schemaobject-options---schema)
- [`.model(String modelName)`](#modelstring-modelname-optionalschema-schema---model)
- [`.client`](#client---elasticsearch)
- [`.stats()`](#stats)
- [`.<span class="apidocCodeKeywordSpan">createIndex</span>(String index, Object mappings)`](#createindexstring-index-object-mappings
)
- [`.removeIndex(String index)`](#removeindexstring-index)
- [Document](#document)
- [`.save()`](#save-document)
- [`.remove()`](#remove)
- [`.update(Object data)`](#updateobject-data---document)
- [`.set(Object data)`](#setobject-data---document)
- [`.toObject()`](#toobject)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.errors" id="apidoc.element.elasticsearch-odm.errors">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>errors
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ElasticsearchError(message){
  this.message = message;
  this.stack = new Error().stack;
  this.name = 'ElasticsearchError';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.isConnected" id="apidoc.element.elasticsearch-odm.isConnected">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>isConnected
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isConnected(){
  return CONNECTED;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.model" id="apidoc.element.elasticsearch-odm.model">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>model
        <span class="apidocSignatureSpan">(modelName, schema)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function model(modelName, schema){
  if(!modelName) throw new MissingArgumentError('modelName');
  if(schema &amp;&amp; !(schema instanceof Schema)) throw new errors.ElasticsearchError('Invalid schema for "'+modelName+'".');

  if(db.models[modelName]){

    // don't overwrite schemas on secondary calls.
    if(schema &amp;&amp; _.isEmpty(db.models[modelName].model.schema)){
      db.models[modelName].model.schema = schema;
    }

    // return model from cache if it exists.
    return db.models[modelName];
  }

  // create a neweable function object.
  function modelInstance(data){
    var self = this;
    // Add any user supplied schema instance methods.
    if(schema){
      _.assign(self, schema.methods);
    }
    Model.call(self, data);
  }
  utils.inherits(modelInstance, Model);

  // add crud/query static functions.
  _.assign(modelInstance, defaultMethods);

  modelInstance.db = db;

  modelInstance.model = {
    type: pluralize(modelName).toLowerCase(),
    name: modelName,
    constructor: modelInstance
  };

  if(schema) {
    modelInstance.model.schema = schema;
    // Add any user supplied schema static methods.
    _.assign(modelInstance, schema.statics);

    // User can provide their own type name, default is pluralized.
    if(schema.options.type) modelInstance.model.type = schema.options.type;

    // Update the mapping asynchronously.
    var mapping = {};
    mapping[modelInstance.model.type] = schema.toMapping();
    mappingQueue.push({type: modelInstance.model.type, mapping: mapping});
    // If we're already connected process the mapping queue.
    if(isConnected()){
      handleMappingQueue();
    }
  }

  return db.models[modelName] = modelInstance;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Quick Start
You'll find the API is intuitive if you've used Mongoose or Waterline.

Example (no schema):

```js
var elasticsearch = require('elasticsearch-odm');
var Car = elasticsearch.<span class="apidocCodeKeywordSpan">model</span>('Car');
var car = new Car({
type: 'Ford', color: 'Black'
});
elasticsearch.connect('my-index').then(function(){
// be sure to call connect before bootstrapping your app.
car.save().then(function(document){
  console.log(document);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.removeIndex" id="apidoc.element.elasticsearch-odm.removeIndex">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>removeIndex
        <span class="apidocSignatureSpan">(index)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function removeIndex(index){
  if(!index) return Promise.reject(new MissingArgumentError('index'));
  if(!isConnected()) return Promise.reject(new ConnectionError(db.host));

  return db.client.indices.delete({index: index}).catch(function(){});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [Core](#core)
  - [`.connect(String/Object options)`](#connectstringobject-options---promise)
  - [`new Schema(Object options)`](#new-schemaobject-options---schema)
  - [`.model(String modelName)`](#modelstring-modelname-optionalschema-schema---model)
  - [`.client`](#client---elasticsearch)
  - [`.stats()`](#stats)
  - [`.createIndex(String index, Object mappings)`](#createindexstring-index-object-mappings)
  - [`.<span class="apidocCodeKeywordSpan">removeIndex</span>(String index)`](#removeindexstring-index)
- [Document](#document)
  - [`.save()`](#save-document)
  - [`.remove()`](#remove)
  - [`.update(Object data)`](#updateobject-data---document)
  - [`.set(Object data)`](#setobject-data---document)
  - [`.toObject()`](#toobject)
- [Model](#model)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.stats" id="apidoc.element.elasticsearch-odm.stats">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>stats
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stats(){
  if(!isConnected()) return Promise.reject(new ConnectionError(db.host));
  return db.client.indices.stats({index:db.index});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```
## API Reference
- [Core](#core)
- [`.connect(String/Object options)`](#connectstringobject-options---promise)
- [`new Schema(Object options)`](#new-schemaobject-options---schema)
- [`.model(String modelName)`](#modelstring-modelname-optionalschema-schema---model)
- [`.client`](#client---elasticsearch)
- [`.<span class="apidocCodeKeywordSpan">stats</span>()`](#stats)
- [`.createIndex(String index, Object mappings)`](#createindexstring-index-object-mappings)
- [`.removeIndex(String index)`](#removeindexstring-index)
- [Document](#document)
- [`.save()`](#save-document)
- [`.remove()`](#remove)
- [`.update(Object data)`](#updateobject-data---document)
- [`.set(Object data)`](#setobject-data---document)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.status" id="apidoc.element.elasticsearch-odm.status">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>status
        <span class="apidocSignatureSpan">(type)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function status(type){
  if(!isConnected()) return Promise.reject(new ConnectionError(db.host));

  var args = {index: db.index};
  if(type) args.type = type;
  return db.client.indices.status(args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

function status(type){
if(!isConnected()) return Promise.reject(new ConnectionError(db.host));

var args = {index: db.index};
if(type) args.type = type;
return db.client.indices.<span class="apidocCodeKeywordSpan">status</span>(args);
}

function createIndex(index, mappings){
if(!index) return Promise.reject(new MissingArgumentError('index'));
if(!isConnected()) return Promise.reject(new ConnectionError(db.host));

return db.client.indices.create({
...</pre></li>
    </ul>


















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.Schema" id="apidoc.module.elasticsearch-odm.Schema">module elasticsearch-odm.Schema</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.Schema.Schema" id="apidoc.element.elasticsearch-odm.Schema.Schema">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>Schema
        <span class="apidocSignatureSpan">(schema, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Schema(schema, options) {
  this.fields = {};
  this.methods = {};
  this.statics = {};
  if(schema) this.fields = buildFieldsFromSchema(schema).fields;

  this.hooks = new Kareem();


  Object.defineProperty(this, 'options', {
    value: _.merge({}, options),
    configurable: false,
    writable: false
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  });
});
```
Example (using a [schema](#schemas)):

```js
var elasticsearch = require('elasticsearch-odm');
var carSchema = new elasticsearch.<span class="apidocCodeKeywordSpan">Schema</span>({
  type: String,
  color: {type: String, required: true}
});
var Car = elasticsearch.model('Car', carSchema);
```
## API Reference
- [Core](#core)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.Schema.prototype" id="apidoc.module.elasticsearch-odm.Schema.prototype">module elasticsearch-odm.Schema.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.Schema.prototype.post" id="apidoc.element.elasticsearch-odm.Schema.prototype.post">
        function <span class="apidocSignatureSpan">elasticsearch-odm.Schema.prototype.</span>post
        <span class="apidocSignatureSpan">(name, func)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">post = function (name, func) {
  this.hooks.post.apply(this.hooks, arguments);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

**Post Hooks**

Same conventions as Mongoose. Does not have a done() callback. Executed after the hooked method. The first argument is the current
 document which may or may not be a document instance (eg. post remove only receives the raw object as the document no longer exists
).

```js
var schema = new elasticsearch.Schema(...);
schema.<span class="apidocCodeKeywordSpan">post</span>('remove', function(document){
  console.log(document);
});
```

#### Static and Instance Methods

Add methods to your schema with the same convention as Mongoose.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.Schema.prototype.pre" id="apidoc.element.elasticsearch-odm.Schema.prototype.pre">
        function <span class="apidocSignatureSpan">elasticsearch-odm.Schema.prototype.</span>pre
        <span class="apidocSignatureSpan">(name, func)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pre = function (name, func) {
  this.hooks.pre.apply(this.hooks, arguments);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

**Pre Hooks**

Same conventions as Mongoose. Function takes a done() callback that must be called when your function is finished. `this` is scoped
 to the current document. assing an Error to done() will cancel the current operation. For example, in a pre 'save' hook
, passing an error to done() will cause the document not to be saved and will return your error to the save() callers rejection
handler.

```js
var schema = new elasticsearch.Schema(...);
schema.<span class="apidocCodeKeywordSpan">pre</span>('save', function(done){
  console.log(this); // this = the current document
  done(); // OR done(new Error('bad document'));
});
```

**Post Hooks**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.Schema.prototype.toMapping" id="apidoc.element.elasticsearch-odm.Schema.prototype.toMapping">
        function <span class="apidocSignatureSpan">elasticsearch-odm.Schema.prototype.</span>toMapping
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toMapping = function () {
  var properties = {};

  var checkLeaf = function(obj, path){
    _.forOwn(obj, function(v, k){
      var currentPath = path ? path + '.' + k : k;
      if(v.type){
        var field = {type: v.type.esType};
        // we extend the type definition with any user supplied options.
        // these options can be any options listed for Elasticsearch Core Types.
        // see https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-core-types.html
        var defaults = {};

        // NOTE: This is opinionated. Setting to not_analyzed doesn't
        // allow full text search. But since we are trying to be like Mongoose
        // we assume this is most helpful to users as a default. This option
        // can still be overridden in the schema.
        if(v.type.jsType === String) defaults.index = 'not_analyzed';

        _.assign(field, defaults, v.options);
        dot.str(currentPath, field, properties);
      }else{
        // If there is no type, then this is a nested object.
        // Build an Elasticsearch object mapping with nested properties.
        dot.str(currentPath, {type: 'object'}, properties);
        checkLeaf(v, currentPath + '.properties');
      }
    });
  };

  checkLeaf(this.fields);

  return {
    properties: properties
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.find(Object/String match, Object queryOptions)`](#findobjectstring-match-object-queryoptions---document)
- [`.findById(String id, Object queryOptions)`](#findbyidstring-id-object-queryoptions---document)
- [`.findByIds(Array ids, Object queryOptions)`](#findbyidsarray-ids-object-queryoptions---document)
- [`.findOne(Object/String match, Object queryOptions)`](#findoneobjectstring-match-object-queryoptions---document)
- [`.findAndRemove(Object/String match, Object queryOptions)`](#findandremoveobjectstring-match-object-queryoptions---object)
- [`.findOneAndRemove(Object/String match, Object queryOptions)`](#findoneandremoveobjectstring-match-object-queryoptions---object
)
- [`.makeInstance(Object data)`](#makeinstanceobject-data---document)
- [`.<span class="apidocCodeKeywordSpan">toMapping</span>()`](#tomapping)
- [Query Options](#query-options)
- [`page &amp; per_page`](#page--per_page)
- [`fields`](#fields)
- [`sort`](#sort)
- [`q`](#q)
- [`must`](#must)
- [`not`](#mot)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.Schema.prototype.validate" id="apidoc.element.elasticsearch-odm.Schema.prototype.validate">
        function <span class="apidocSignatureSpan">elasticsearch-odm.Schema.prototype.</span>validate
        <span class="apidocSignatureSpan">(doc, partial)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function (doc, partial) {
  var errs = [];
  var self = this;

  var compareWithOptions = function(field, fieldType, path){
    if(field){
      if(fieldType.type.compare(field) === false){
        errs.push(new ValidatorError(path, "Value '" + field + "' Not of type '" + fieldType.type.esType + '".'));
      }
    }else{
      if(fieldType.options.required &amp;&amp; !partial){
        errs.push(new ValidatorError(path, 'Required field is missing.'));
      }
    }
  };

  var checkType = function(fieldType, path){
    var docField = dot.pick(path, doc);
    // check if it's an array of items or a single value.
    // check all elements in the array if so.
    if(_.isArray(docField)){
      _.forEach(docField, function(v){
        compareWithOptions(v, fieldType, path);
      });
    }else{
      compareWithOptions(docField, fieldType, path);
    }
  };

  var checkLeaf = function(obj, path){
    _.forOwn(obj, function(v, k){
      // build a dot notation path to be used with 'dot-object'
      var currentPath = path ? path + '.' + k : k;

      // if a leaf contains a type property, then it's a type definition
      // otherwise it's a nested document.
      if(v.type){
        if(_.isPlainObject(v.type) &amp;&amp; v.type.type){
          currentPath = currentPath + '.type';
          v = v.type;
        }
        checkType(v, currentPath);
      }else{
        checkLeaf(v, currentPath);
      }
    });
  };

  checkLeaf(self.fields);

  if(errs.length){
    return new ValidationError(self, errs);
  }else{
    void 0;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
  }
  return void 0;
};

Model.prototype.validate = function(doc, partial) {
  if(this.constructor.model.schema){
    return this.constructor.model.schema.<span class="apidocCodeKeywordSpan">validate</span>(doc, partial);
  }
};

Model.prototype.toObject = function() {
  return _.cloneDeep(this);
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.Schema.prototype.post" id="apidoc.module.elasticsearch-odm.Schema.prototype.post">module elasticsearch-odm.Schema.prototype.post</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.Schema.prototype.post.post" id="apidoc.element.elasticsearch-odm.Schema.prototype.post.post">
        function <span class="apidocSignatureSpan">elasticsearch-odm.Schema.prototype.</span>post
        <span class="apidocSignatureSpan">(name, func)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">post = function (name, func) {
  this.hooks.post.apply(this.hooks, arguments);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

**Post Hooks**

Same conventions as Mongoose. Does not have a done() callback. Executed after the hooked method. The first argument is the current
 document which may or may not be a document instance (eg. post remove only receives the raw object as the document no longer exists
).

```js
var schema = new elasticsearch.Schema(...);
schema.<span class="apidocCodeKeywordSpan">post</span>('remove', function(document){
  console.log(document);
});
```

#### Static and Instance Methods

Add methods to your schema with the same convention as Mongoose.
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.Schema.prototype.pre" id="apidoc.module.elasticsearch-odm.Schema.prototype.pre">module elasticsearch-odm.Schema.prototype.pre</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.Schema.prototype.pre.pre" id="apidoc.element.elasticsearch-odm.Schema.prototype.pre.pre">
        function <span class="apidocSignatureSpan">elasticsearch-odm.Schema.prototype.</span>pre
        <span class="apidocSignatureSpan">(name, func)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pre = function (name, func) {
  this.hooks.pre.apply(this.hooks, arguments);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

**Pre Hooks**

Same conventions as Mongoose. Function takes a done() callback that must be called when your function is finished. `this` is scoped
 to the current document. assing an Error to done() will cancel the current operation. For example, in a pre 'save' hook
, passing an error to done() will cause the document not to be saved and will return your error to the save() callers rejection
handler.

```js
var schema = new elasticsearch.Schema(...);
schema.<span class="apidocCodeKeywordSpan">pre</span>('save', function(done){
  console.log(this); // this = the current document
  done(); // OR done(new Error('bad document'));
});
```

**Post Hooks**
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.Schema.prototype.toMapping" id="apidoc.module.elasticsearch-odm.Schema.prototype.toMapping">module elasticsearch-odm.Schema.prototype.toMapping</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.Schema.prototype.toMapping.toMapping" id="apidoc.element.elasticsearch-odm.Schema.prototype.toMapping.toMapping">
        function <span class="apidocSignatureSpan">elasticsearch-odm.Schema.prototype.</span>toMapping
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toMapping = function () {
  var properties = {};

  var checkLeaf = function(obj, path){
    _.forOwn(obj, function(v, k){
      var currentPath = path ? path + '.' + k : k;
      if(v.type){
        var field = {type: v.type.esType};
        // we extend the type definition with any user supplied options.
        // these options can be any options listed for Elasticsearch Core Types.
        // see https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-core-types.html
        var defaults = {};

        // NOTE: This is opinionated. Setting to not_analyzed doesn't
        // allow full text search. But since we are trying to be like Mongoose
        // we assume this is most helpful to users as a default. This option
        // can still be overridden in the schema.
        if(v.type.jsType === String) defaults.index = 'not_analyzed';

        _.assign(field, defaults, v.options);
        dot.str(currentPath, field, properties);
      }else{
        // If there is no type, then this is a nested object.
        // Build an Elasticsearch object mapping with nested properties.
        dot.str(currentPath, {type: 'object'}, properties);
        checkLeaf(v, currentPath + '.properties');
      }
    });
  };

  checkLeaf(this.fields);

  return {
    properties: properties
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.find(Object/String match, Object queryOptions)`](#findobjectstring-match-object-queryoptions---document)
- [`.findById(String id, Object queryOptions)`](#findbyidstring-id-object-queryoptions---document)
- [`.findByIds(Array ids, Object queryOptions)`](#findbyidsarray-ids-object-queryoptions---document)
- [`.findOne(Object/String match, Object queryOptions)`](#findoneobjectstring-match-object-queryoptions---document)
- [`.findAndRemove(Object/String match, Object queryOptions)`](#findandremoveobjectstring-match-object-queryoptions---object)
- [`.findOneAndRemove(Object/String match, Object queryOptions)`](#findoneandremoveobjectstring-match-object-queryoptions---object
)
- [`.makeInstance(Object data)`](#makeinstanceobject-data---document)
- [`.<span class="apidocCodeKeywordSpan">toMapping</span>()`](#tomapping)
- [Query Options](#query-options)
- [`page &amp; per_page`](#page--per_page)
- [`fields`](#fields)
- [`sort`](#sort)
- [`q`](#q)
- [`must`](#must)
- [`not`](#mot)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.Schema.prototype.validate" id="apidoc.module.elasticsearch-odm.Schema.prototype.validate">module elasticsearch-odm.Schema.prototype.validate</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.Schema.prototype.validate.validate" id="apidoc.element.elasticsearch-odm.Schema.prototype.validate.validate">
        function <span class="apidocSignatureSpan">elasticsearch-odm.Schema.prototype.</span>validate
        <span class="apidocSignatureSpan">(doc, partial)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function (doc, partial) {
  var errs = [];
  var self = this;

  var compareWithOptions = function(field, fieldType, path){
    if(field){
      if(fieldType.type.compare(field) === false){
        errs.push(new ValidatorError(path, "Value '" + field + "' Not of type '" + fieldType.type.esType + '".'));
      }
    }else{
      if(fieldType.options.required &amp;&amp; !partial){
        errs.push(new ValidatorError(path, 'Required field is missing.'));
      }
    }
  };

  var checkType = function(fieldType, path){
    var docField = dot.pick(path, doc);
    // check if it's an array of items or a single value.
    // check all elements in the array if so.
    if(_.isArray(docField)){
      _.forEach(docField, function(v){
        compareWithOptions(v, fieldType, path);
      });
    }else{
      compareWithOptions(docField, fieldType, path);
    }
  };

  var checkLeaf = function(obj, path){
    _.forOwn(obj, function(v, k){
      // build a dot notation path to be used with 'dot-object'
      var currentPath = path ? path + '.' + k : k;

      // if a leaf contains a type property, then it's a type definition
      // otherwise it's a nested document.
      if(v.type){
        if(_.isPlainObject(v.type) &amp;&amp; v.type.type){
          currentPath = currentPath + '.type';
          v = v.type;
        }
        checkType(v, currentPath);
      }else{
        checkLeaf(v, currentPath);
      }
    });
  };

  checkLeaf(self.fields);

  if(errs.length){
    return new ValidationError(self, errs);
  }else{
    void 0;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
  }
  return void 0;
};

Model.prototype.validate = function(doc, partial) {
  if(this.constructor.model.schema){
    return this.constructor.model.schema.<span class="apidocCodeKeywordSpan">validate</span>(doc, partial);
  }
};

Model.prototype.toObject = function() {
  return _.cloneDeep(this);
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.client" id="apidoc.module.elasticsearch-odm.client">module elasticsearch-odm.client</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.client.makeClient" id="apidoc.element.elasticsearch-odm.client.makeClient">
        function <span class="apidocSignatureSpan">elasticsearch-odm.client.</span>makeClient
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">makeClient = function (options){
  return new elasticsearch.Client(getClientSettings(options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  delete options.syncMapping;
}
db = _.assign(db, options);
  }else{
return Promise.reject(new MissingArgumentError('options'));
  }

  module.exports.client = db.client = Client.<span class="apidocCodeKeywordSpan">makeClient</span>(db);

  return db.client.indices.exists({index: db.index}).then(function(result){
//No error - connected
CONNECTED = true;

if(result){
  return handleMappingQueue();
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.connect" id="apidoc.module.elasticsearch-odm.connect">module elasticsearch-odm.connect</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.connect.connect" id="apidoc.element.elasticsearch-odm.connect.connect">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>connect
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function connect(options){
  if(isConnected()) return Promise.resolve();

  // can pass just the index name, or a client configuration object.
  if(_.isString(options)){
    db.index = options;
  }else if(_.isObject(options)){
    if(!options.index) return Promise.reject(new MissingArgumentError('options.index'));
    if(options.hasOwnProperty('syncMapping')){
      syncMapping = options.syncMapping;
      delete options.syncMapping;
    }
    db = _.assign(db, options);
  }else{
    return Promise.reject(new MissingArgumentError('options'));
  }

  module.exports.client = db.client = Client.makeClient(db);

  return db.client.indices.exists({index: db.index}).then(function(result){
    //No error - connected
    CONNECTED = true;

    if(result){
      return handleMappingQueue();
    }else{
      // if the index doesn't exist, then create it.
      return createIndex(db.index).then(handleMappingQueue);
    }
  })
  .then(function(results){
    return Promise.resolve();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```js
var elasticsearch = require('elasticsearch-odm');
var Car = elasticsearch.model('Car');
var car = new Car({
  type: 'Ford', color: 'Black'
});
elasticsearch.<span class="apidocCodeKeywordSpan">connect</span>('my-index').then(function(){
  // be sure to call connect before bootstrapping your app.
  car.save().then(function(document){
    console.log(document);
  });
});
```
Example (using a [schema](#schemas)):
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.createIndex" id="apidoc.module.elasticsearch-odm.createIndex">module elasticsearch-odm.createIndex</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.createIndex.createIndex" id="apidoc.element.elasticsearch-odm.createIndex.createIndex">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>createIndex
        <span class="apidocSignatureSpan">(index, mappings)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createIndex(index, mappings){
  if(!index) return Promise.reject(new MissingArgumentError('index'));
  if(!isConnected()) return Promise.reject(new ConnectionError(db.host));

  return db.client.indices.create({
    index: index,
    body: mappings || defaultMappings
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
## API Reference
- [Core](#core)
- [`.connect(String/Object options)`](#connectstringobject-options---promise)
- [`new Schema(Object options)`](#new-schemaobject-options---schema)
- [`.model(String modelName)`](#modelstring-modelname-optionalschema-schema---model)
- [`.client`](#client---elasticsearch)
- [`.stats()`](#stats)
- [`.<span class="apidocCodeKeywordSpan">createIndex</span>(String index, Object mappings)`](#createindexstring-index-object-mappings
)
- [`.removeIndex(String index)`](#removeindexstring-index)
- [Document](#document)
- [`.save()`](#save-document)
- [`.remove()`](#remove)
- [`.update(Object data)`](#updateobject-data---document)
- [`.set(Object data)`](#setobject-data---document)
- [`.toObject()`](#toobject)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.default_methods" id="apidoc.module.elasticsearch-odm.default_methods">module elasticsearch-odm.default_methods</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.default_methods.count" id="apidoc.element.elasticsearch-odm.default_methods.count">
        function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>count
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">count = function () {
  return this.db.client.count({
    index: this.db.index,
    type: this.model.type,
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [Document](#document)
- [`.save()`](#save-document)
- [`.remove()`](#remove)
- [`.update(Object data)`](#updateobject-data---document)
- [`.set(Object data)`](#setobject-data---document)
- [`.toObject()`](#toobject)
- [Model](#model)
- [`.<span class="apidocCodeKeywordSpan">count</span>()`](#count---object)
- [`.create(Object data)`](#createobject-data---document)
- [`.update(String id, Object data)`](#updatestring-id-object-data---document)
- [`.remove(String id)`](#removestring-id)
- [`.removeByIds(Array ids)`](#removebyidsarray-id)
- [`.set(String id)`](#setstring-id-object-data---document)
- [`.find(Object/String match, Object queryOptions)`](#findobjectstring-match-object-queryoptions---document)
- [`.findById(String id, Object queryOptions)`](#findbyidstring-id-object-queryoptions---document)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.default_methods.create" id="apidoc.element.elasticsearch-odm.default_methods.create">
        function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>create
        <span class="apidocSignatureSpan">(data, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (data, options) {
  options = options || {};
  if (!data) return Promise.reject(new MissingArgumentError('data'));
  data.createdOn = data.createdOn = new Date().toISOString();
  data.updatedOn = data.updatedOn = new Date().toISOString();

  var self = this;
  return self.db.client.create({
    index: self.db.index,
    type: self.model.type,
    body: data,
    refresh: false, // dont use refresh here, as it's refresh when we update with id.
  })
  .then(function(result) {
    return self.update(result._id, {id: result._id}, options);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.save()`](#save-document)
- [`.remove()`](#remove)
- [`.update(Object data)`](#updateobject-data---document)
- [`.set(Object data)`](#setobject-data---document)
- [`.toObject()`](#toobject)
- [Model](#model)
- [`.count()`](#count---object)
- [`.<span class="apidocCodeKeywordSpan">create</span>(Object data)`](#createobject-data---document)
- [`.update(String id, Object data)`](#updatestring-id-object-data---document)
- [`.remove(String id)`](#removestring-id)
- [`.removeByIds(Array ids)`](#removebyidsarray-id)
- [`.set(String id)`](#setstring-id-object-data---document)
- [`.find(Object/String match, Object queryOptions)`](#findobjectstring-match-object-queryoptions---document)
- [`.findById(String id, Object queryOptions)`](#findbyidstring-id-object-queryoptions---document)
- [`.findByIds(Array ids, Object queryOptions)`](#findbyidsarray-ids-object-queryoptions---document)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.default_methods.find" id="apidoc.element.elasticsearch-odm.default_methods.find">
        function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>find
        <span class="apidocSignatureSpan">(match, queryOptions)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">find = function (match, queryOptions) {
  var self = this;
  queryOptions = _.isPlainObject(queryOptions) ? queryOptions : {};
  var query = Query.parseRequest(self.db.index, self.model.type, match, queryOptions);

  return new Query.QueryPromise(query, function(q){
    return self.search(queryOptions, q);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [Model](#model)
- [`.count()`](#count---object)
- [`.create(Object data)`](#createobject-data---document)
- [`.update(String id, Object data)`](#updatestring-id-object-data---document)
- [`.remove(String id)`](#removestring-id)
- [`.removeByIds(Array ids)`](#removebyidsarray-id)
- [`.set(String id)`](#setstring-id-object-data---document)
- [`.<span class="apidocCodeKeywordSpan">find</span>(Object/String match, Object queryOptions)`](#findobjectstring-match-object-
queryoptions---document)
- [`.findById(String id, Object queryOptions)`](#findbyidstring-id-object-queryoptions---document)
- [`.findByIds(Array ids, Object queryOptions)`](#findbyidsarray-ids-object-queryoptions---document)
- [`.findOne(Object/String match, Object queryOptions)`](#findoneobjectstring-match-object-queryoptions---document)
- [`.findAndRemove(Object/String match, Object queryOptions)`](#findandremoveobjectstring-match-object-queryoptions---object)
- [`.findOneAndRemove(Object/String match, Object queryOptions)`](#findoneandremoveobjectstring-match-object-queryoptions---object
)
- [`.makeInstance(Object data)`](#makeinstanceobject-data---document)
- [`.toMapping()`](#tomapping)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.default_methods.findAndRemove" id="apidoc.element.elasticsearch-odm.default_methods.findAndRemove">
        function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>findAndRemove
        <span class="apidocSignatureSpan">(match, queryOptions, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findAndRemove = function (match, queryOptions, options) {
  if( _.isEmpty(match) &amp;&amp; _.isEmpty(queryOptions) ) return Promise.reject(new MissingArgumentError('match'));

  options = _.isPlainObject(options) ? options : {};
  queryOptions = _.isPlainObject(queryOptions) ? queryOptions : {};
  queryOptions = _.pick(queryOptions, ['q', 'must', 'not', 'exists', 'missing']);
  queryOptions.fields = 'id';

  var self = this;
  // we could use elasticsearchs deleteByQuery() but it will be deprecated in version 2
  // so we just fetch all id's, and run a normal delete query on then.
  return self.find(match, queryOptions).then(function(results) {
    if (!results || !results.length) return [];

    var bulkOps = _.chain(results)
      .each()
      .map(function(v) {
        return {
          'delete': {
            '_index': self.db.index,
            '_type': self.model.type,
            '_id': v.id
          }
        };
      })
      .value();

    return self.db.client.bulk({body: bulkOps, refresh: options.refresh || false});
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.remove(String id)`](#removestring-id)
- [`.removeByIds(Array ids)`](#removebyidsarray-id)
- [`.set(String id)`](#setstring-id-object-data---document)
- [`.find(Object/String match, Object queryOptions)`](#findobjectstring-match-object-queryoptions---document)
- [`.findById(String id, Object queryOptions)`](#findbyidstring-id-object-queryoptions---document)
- [`.findByIds(Array ids, Object queryOptions)`](#findbyidsarray-ids-object-queryoptions---document)
- [`.findOne(Object/String match, Object queryOptions)`](#findoneobjectstring-match-object-queryoptions---document)
- [`.<span class="apidocCodeKeywordSpan">findAndRemove</span>(Object/String match, Object queryOptions)`](#findandremoveobjectstring
-match-object-queryoptions---object)
- [`.findOneAndRemove(Object/String match, Object queryOptions)`](#findoneandremoveobjectstring-match-object-queryoptions---object
)
- [`.makeInstance(Object data)`](#makeinstanceobject-data---document)
- [`.toMapping()`](#tomapping)
- [Query Options](#query-options)
- [`page &amp; per_page`](#page--per_page)
- [`fields`](#fields)
- [`sort`](#sort)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.default_methods.findById" id="apidoc.element.elasticsearch-odm.default_methods.findById">
        function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>findById
        <span class="apidocSignatureSpan">(id, queryOptions)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findById = function (id, queryOptions) {
  if (!id) return Promise.reject(new MissingArgumentError('id'));

  var self = this;
  queryOptions = _.isPlainObject(queryOptions) ? queryOptions : {};

  var func = function(query){
    return self.db.client.getSource(query)
    .then(function(results) {
      return self.makeInstance(results);
    });
  };
  queryOptions.id = id;

  var query = Query.parseRequest(self.db.index, self.model.type, null, queryOptions);
  // get requests shouldn't include a body;
  delete query.body;
  return new Query.QueryPromise(query, func);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  - [`.count()`](#count---object)
  - [`.create(Object data)`](#createobject-data---document)
  - [`.update(String id, Object data)`](#updatestring-id-object-data---document)
  - [`.remove(String id)`](#removestring-id)
  - [`.removeByIds(Array ids)`](#removebyidsarray-id)
  - [`.set(String id)`](#setstring-id-object-data---document)
  - [`.find(Object/String match, Object queryOptions)`](#findobjectstring-match-object-queryoptions---document)
  - [`.<span class="apidocCodeKeywordSpan">findById</span>(String id, Object queryOptions)`](#findbyidstring-id-object-queryoptions
---document)
  - [`.findByIds(Array ids, Object queryOptions)`](#findbyidsarray-ids-object-queryoptions---document)
  - [`.findOne(Object/String match, Object queryOptions)`](#findoneobjectstring-match-object-queryoptions---document)
  - [`.findAndRemove(Object/String match, Object queryOptions)`](#findandremoveobjectstring-match-object-queryoptions---object)
  - [`.findOneAndRemove(Object/String match, Object queryOptions)`](#findoneandremoveobjectstring-match-object-queryoptions---object
)
  - [`.makeInstance(Object data)`](#makeinstanceobject-data---document)
  - [`.toMapping()`](#tomapping)
- [Query Options](#query-options)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.default_methods.findByIds" id="apidoc.element.elasticsearch-odm.default_methods.findByIds">
        function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>findByIds
        <span class="apidocSignatureSpan">(ids, queryOptions)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findByIds = function (ids, queryOptions) {
  if (!ids) return Promise.reject(new MissingArgumentError('ids'));
  if (_.isString(ids)) return self.findById(ids, queryOptions);

  var self = this;
  queryOptions = _.isPlainObject(queryOptions) ? queryOptions : {};
  queryOptions.ids = ids;

  var query = Query.parseRequest(self.db.index, self.model.type, null, queryOptions);

  return new Query.QueryPromise(query, function(q){
    return self.search(queryOptions, q);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.create(Object data)`](#createobject-data---document)
- [`.update(String id, Object data)`](#updatestring-id-object-data---document)
- [`.remove(String id)`](#removestring-id)
- [`.removeByIds(Array ids)`](#removebyidsarray-id)
- [`.set(String id)`](#setstring-id-object-data---document)
- [`.find(Object/String match, Object queryOptions)`](#findobjectstring-match-object-queryoptions---document)
- [`.findById(String id, Object queryOptions)`](#findbyidstring-id-object-queryoptions---document)
- [`.<span class="apidocCodeKeywordSpan">findByIds</span>(Array ids, Object queryOptions)`](#findbyidsarray-ids-object-queryoptions
---document)
- [`.findOne(Object/String match, Object queryOptions)`](#findoneobjectstring-match-object-queryoptions---document)
- [`.findAndRemove(Object/String match, Object queryOptions)`](#findandremoveobjectstring-match-object-queryoptions---object)
- [`.findOneAndRemove(Object/String match, Object queryOptions)`](#findoneandremoveobjectstring-match-object-queryoptions---object
)
- [`.makeInstance(Object data)`](#makeinstanceobject-data---document)
- [`.toMapping()`](#tomapping)
- [Query Options](#query-options)
- [`page &amp; per_page`](#page--per_page)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.default_methods.findOne" id="apidoc.element.elasticsearch-odm.default_methods.findOne">
        function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>findOne
        <span class="apidocSignatureSpan">(match, queryOptions)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findOne = function (match, queryOptions) {
  if( _.isEmpty(match) &amp;&amp; _.isEmpty(queryOptions) ) return Promise.reject(new MissingArgumentError('match'));

  var self = this;
  queryOptions = _.isPlainObject(queryOptions) ? queryOptions : {};
  // Safe default, assuming many matches return the newest.
  queryOptions.sort = queryOptions.sort || '-createdOn';
  queryOptions.page = 0;
  queryOptions.per_page = 1;
  var func = function(query){
    return self.search(queryOptions, query).then(function(results) {
      if (results &amp;&amp; results.hits &amp;&amp; results.hits.length) {
        return results.hits[0];
      } else {
        return void 0;
      }
    });
  };

  var query = Query.parseRequest(self.db.index, self.model.type, match, queryOptions);

  return new Query.QueryPromise(query, func);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.update(String id, Object data)`](#updatestring-id-object-data---document)
- [`.remove(String id)`](#removestring-id)
- [`.removeByIds(Array ids)`](#removebyidsarray-id)
- [`.set(String id)`](#setstring-id-object-data---document)
- [`.find(Object/String match, Object queryOptions)`](#findobjectstring-match-object-queryoptions---document)
- [`.findById(String id, Object queryOptions)`](#findbyidstring-id-object-queryoptions---document)
- [`.findByIds(Array ids, Object queryOptions)`](#findbyidsarray-ids-object-queryoptions---document)
- [`.<span class="apidocCodeKeywordSpan">findOne</span>(Object/String match, Object queryOptions)`](#findoneobjectstring-match-object
-queryoptions---document)
- [`.findAndRemove(Object/String match, Object queryOptions)`](#findandremoveobjectstring-match-object-queryoptions---object)
- [`.findOneAndRemove(Object/String match, Object queryOptions)`](#findoneandremoveobjectstring-match-object-queryoptions---object
)
- [`.makeInstance(Object data)`](#makeinstanceobject-data---document)
- [`.toMapping()`](#tomapping)
- [Query Options](#query-options)
- [`page &amp; per_page`](#page--per_page)
- [`fields`](#fields)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.default_methods.findOneAndRemove" id="apidoc.element.elasticsearch-odm.default_methods.findOneAndRemove">
        function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>findOneAndRemove
        <span class="apidocSignatureSpan">(match, queryOptions, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findOneAndRemove = function (match, queryOptions, options) {
  if (_.isEmpty(match)) return Promise.reject(new MissingArgumentError('match'));

  var self = this;
  queryOptions = _.isPlainObject(queryOptions) ? queryOptions : {};
  options = _.isPlainObject(options) ? options : {};

  return self.findOne(match, queryOptions).then(function(results) {
    if(results &amp;&amp; results.id){
      return self.remove(results.id, options).then(function(){
        return results;
      })
    }else{
        return [];
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.removeByIds(Array ids)`](#removebyidsarray-id)
- [`.set(String id)`](#setstring-id-object-data---document)
- [`.find(Object/String match, Object queryOptions)`](#findobjectstring-match-object-queryoptions---document)
- [`.findById(String id, Object queryOptions)`](#findbyidstring-id-object-queryoptions---document)
- [`.findByIds(Array ids, Object queryOptions)`](#findbyidsarray-ids-object-queryoptions---document)
- [`.findOne(Object/String match, Object queryOptions)`](#findoneobjectstring-match-object-queryoptions---document)
- [`.findAndRemove(Object/String match, Object queryOptions)`](#findandremoveobjectstring-match-object-queryoptions---object)
- [`.<span class="apidocCodeKeywordSpan">findOneAndRemove</span>(Object/String match, Object queryOptions)`](#findoneandremoveobjectstring
-match-object-queryoptions---object)
- [`.makeInstance(Object data)`](#makeinstanceobject-data---document)
- [`.toMapping()`](#tomapping)
- [Query Options](#query-options)
- [`page &amp; per_page`](#page--per_page)
- [`fields`](#fields)
- [`sort`](#sort)
- [`q`](#q)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.default_methods.makeInstance" id="apidoc.element.elasticsearch-odm.default_methods.makeInstance">
        function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>makeInstance
        <span class="apidocSignatureSpan">(documents)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">makeInstance = function (documents) {
  var self = this;
  if (!documents) return Promise.reject(new MissingArgumentError('documents'));

  var make = function(document) {
    return new self.model.constructor(document || {});
  };

  if (_.isArray(documents)) {
    var models = [];
    _.forEach(documents, function(document) {
      models.push(make(document));
    });
    return models;
  } else {
    return make(documents);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.set(String id)`](#setstring-id-object-data---document)
- [`.find(Object/String match, Object queryOptions)`](#findobjectstring-match-object-queryoptions---document)
- [`.findById(String id, Object queryOptions)`](#findbyidstring-id-object-queryoptions---document)
- [`.findByIds(Array ids, Object queryOptions)`](#findbyidsarray-ids-object-queryoptions---document)
- [`.findOne(Object/String match, Object queryOptions)`](#findoneobjectstring-match-object-queryoptions---document)
- [`.findAndRemove(Object/String match, Object queryOptions)`](#findandremoveobjectstring-match-object-queryoptions---object)
- [`.findOneAndRemove(Object/String match, Object queryOptions)`](#findoneandremoveobjectstring-match-object-queryoptions---object
)
- [`.<span class="apidocCodeKeywordSpan">makeInstance</span>(Object data)`](#makeinstanceobject-data---document)
- [`.toMapping()`](#tomapping)
- [Query Options](#query-options)
- [`page &amp; per_page`](#page--per_page)
- [`fields`](#fields)
- [`sort`](#sort)
- [`q`](#q)
- [`must`](#must)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.default_methods.remove" id="apidoc.element.elasticsearch-odm.default_methods.remove">
        function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>remove
        <span class="apidocSignatureSpan">(id, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function (id, options) {
  options = options || {};
  if (!id) return Promise.reject(new MissingArgumentError('id'));

  return this.db.client.delete({
    index: this.db.index,
    refresh: options.refresh || false,
    type: this.model.type,
    id: id
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.model(String modelName)`](#modelstring-modelname-optionalschema-schema---model)
- [`.client`](#client---elasticsearch)
- [`.stats()`](#stats)
- [`.createIndex(String index, Object mappings)`](#createindexstring-index-object-mappings)
- [`.removeIndex(String index)`](#removeindexstring-index)
- [Document](#document)
- [`.save()`](#save-document)
- [`.<span class="apidocCodeKeywordSpan">remove</span>()`](#remove)
- [`.update(Object data)`](#updateobject-data---document)
- [`.set(Object data)`](#setobject-data---document)
- [`.toObject()`](#toobject)
- [Model](#model)
- [`.count()`](#count---object)
- [`.create(Object data)`](#createobject-data---document)
- [`.update(String id, Object data)`](#updatestring-id-object-data---document)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.default_methods.removeByIds" id="apidoc.element.elasticsearch-odm.default_methods.removeByIds">
        function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>removeByIds
        <span class="apidocSignatureSpan">(ids)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">removeByIds = function (ids) {
  if (!ids) return Promise.reject(new MissingArgumentError('ids'));

  return this.findAndRemove({id: ids});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.set(Object data)`](#setobject-data---document)
- [`.toObject()`](#toobject)
- [Model](#model)
- [`.count()`](#count---object)
- [`.create(Object data)`](#createobject-data---document)
- [`.update(String id, Object data)`](#updatestring-id-object-data---document)
- [`.remove(String id)`](#removestring-id)
- [`.<span class="apidocCodeKeywordSpan">removeByIds</span>(Array ids)`](#removebyidsarray-id)
- [`.set(String id)`](#setstring-id-object-data---document)
- [`.find(Object/String match, Object queryOptions)`](#findobjectstring-match-object-queryoptions---document)
- [`.findById(String id, Object queryOptions)`](#findbyidstring-id-object-queryoptions---document)
- [`.findByIds(Array ids, Object queryOptions)`](#findbyidsarray-ids-object-queryoptions---document)
- [`.findOne(Object/String match, Object queryOptions)`](#findoneobjectstring-match-object-queryoptions---document)
- [`.findAndRemove(Object/String match, Object queryOptions)`](#findandremoveobjectstring-match-object-queryoptions---object)
- [`.findOneAndRemove(Object/String match, Object queryOptions)`](#findoneandremoveobjectstring-match-object-queryoptions---object
)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.default_methods.search" id="apidoc.element.elasticsearch-odm.default_methods.search">
        function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>search
        <span class="apidocSignatureSpan">(queryOptions, query)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">search = function (queryOptions, query){
  var self = this;
  return self.db.client.search(query).then(function(results) {

    results = Query.parseResponse(queryOptions, query, results);
    // is this a pages request or normal?
    if (queryOptions &amp;&amp; (queryOptions.page || queryOptions.per_page)) {
      if (results.hits.length) {
        results.hits = self.makeInstance(results.hits);
      }
    } else {
      results = self.makeInstance(results);
      // this method will always return an array.
      if (!_.isArray(results)) results = [results];
    }
    return results;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    .then(function(res) {
return self.findById(id);
    });
  },

  search: function(queryOptions, query){
    var self = this;
    return self.db.client.<span class="apidocCodeKeywordSpan">search</span>(query).then(function(results) {

results = Query.parseResponse(queryOptions, query, results);
// is this a pages request or normal?
if (queryOptions &amp;&amp; (queryOptions.page || queryOptions.per_page)) {
  if (results.hits.length) {
    results.hits = self.makeInstance(results.hits);
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.default_methods.set" id="apidoc.element.elasticsearch-odm.default_methods.set">
        function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>set
        <span class="apidocSignatureSpan">(id, document, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set = function (id, document, options) {
  if (!id) return Promise.reject(new MissingArgumentError('id'));
  if (!document) return Promise.reject(new MissingArgumentError('document'));

  var self = this;
  options = _.isPlainObject(options) ? options : {};

  // just to be safe, force id.so it's not removed.
  document.id = id;

  return self.db.client.index({
    index: self.db.index,
    type: self.model.type,
    id: id,
    refresh: options.refresh || false,
    body: document
  })
  .then(function() {
    return self.makeInstance(document);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.stats()`](#stats)
- [`.createIndex(String index, Object mappings)`](#createindexstring-index-object-mappings)
- [`.removeIndex(String index)`](#removeindexstring-index)
- [Document](#document)
- [`.save()`](#save-document)
- [`.remove()`](#remove)
- [`.update(Object data)`](#updateobject-data---document)
- [`.<span class="apidocCodeKeywordSpan">set</span>(Object data)`](#setobject-data---document)
- [`.toObject()`](#toobject)
- [Model](#model)
- [`.count()`](#count---object)
- [`.create(Object data)`](#createobject-data---document)
- [`.update(String id, Object data)`](#updatestring-id-object-data---document)
- [`.remove(String id)`](#removestring-id)
- [`.removeByIds(Array ids)`](#removebyidsarray-id)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.default_methods.toMapping" id="apidoc.element.elasticsearch-odm.default_methods.toMapping">
        function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>toMapping
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toMapping = function () {
  // toMapping is only for models with schemas
  if(!this.model.schema) return void 0;

  var mapping = {};
  mapping[this.model.type] = {};
  _.assign(mapping[this.model.type], this.model.schema.toMapping());
  return mapping;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.find(Object/String match, Object queryOptions)`](#findobjectstring-match-object-queryoptions---document)
- [`.findById(String id, Object queryOptions)`](#findbyidstring-id-object-queryoptions---document)
- [`.findByIds(Array ids, Object queryOptions)`](#findbyidsarray-ids-object-queryoptions---document)
- [`.findOne(Object/String match, Object queryOptions)`](#findoneobjectstring-match-object-queryoptions---document)
- [`.findAndRemove(Object/String match, Object queryOptions)`](#findandremoveobjectstring-match-object-queryoptions---object)
- [`.findOneAndRemove(Object/String match, Object queryOptions)`](#findoneandremoveobjectstring-match-object-queryoptions---object
)
- [`.makeInstance(Object data)`](#makeinstanceobject-data---document)
- [`.<span class="apidocCodeKeywordSpan">toMapping</span>()`](#tomapping)
- [Query Options](#query-options)
- [`page &amp; per_page`](#page--per_page)
- [`fields`](#fields)
- [`sort`](#sort)
- [`q`](#q)
- [`must`](#must)
- [`not`](#mot)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.default_methods.update" id="apidoc.element.elasticsearch-odm.default_methods.update">
        function <span class="apidocSignatureSpan">elasticsearch-odm.default_methods.</span>update
        <span class="apidocSignatureSpan">(id, data, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (id, data, options) {
  options = options || {};
  if (!id) return Promise.reject(new MissingArgumentError('id'));
  if (!data) return Promise.reject(new MissingArgumentError('data'));

  data.updatedOn = new Date().toISOString();

  var self = this;
  return self.db.client.update({
    index: self.db.index,
    type: self.model.type,
    id: id,
    refresh: options.refresh || false,
    body: {
      doc: data
    }
  })
  .then(function(res) {
    return self.findById(id);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.client`](#client---elasticsearch)
- [`.stats()`](#stats)
- [`.createIndex(String index, Object mappings)`](#createindexstring-index-object-mappings)
- [`.removeIndex(String index)`](#removeindexstring-index)
- [Document](#document)
- [`.save()`](#save-document)
- [`.remove()`](#remove)
- [`.<span class="apidocCodeKeywordSpan">update</span>(Object data)`](#updateobject-data---document)
- [`.set(Object data)`](#setobject-data---document)
- [`.toObject()`](#toobject)
- [Model](#model)
- [`.count()`](#count---object)
- [`.create(Object data)`](#createobject-data---document)
- [`.update(String id, Object data)`](#updatestring-id-object-data---document)
- [`.remove(String id)`](#removestring-id)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.errors" id="apidoc.module.elasticsearch-odm.errors">module elasticsearch-odm.errors</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.errors.errors" id="apidoc.element.elasticsearch-odm.errors.errors">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>errors
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ElasticsearchError(message){
  this.message = message;
  this.stack = new Error().stack;
  this.name = 'ElasticsearchError';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.errors.ConnectionError" id="apidoc.element.elasticsearch-odm.errors.ConnectionError">
        function <span class="apidocSignatureSpan">elasticsearch-odm.errors.</span>ConnectionError
        <span class="apidocSignatureSpan">(host)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ConnectionError(host){
  var message;
  if(host){
    message = 'No connection can be established to Elasticsearch at ' + host;
  }else{
    message = 'No connection has been established to Elasticsearch.';
  }
  ElasticsearchError.call(this, message);
  if(Error.captureStackTrace) Error.captureStackTrace(this, arguments.callee);
  this.name = 'ConnectionError';
  this.host = host || '';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.errors.MissingArgumentError" id="apidoc.element.elasticsearch-odm.errors.MissingArgumentError">
        function <span class="apidocSignatureSpan">elasticsearch-odm.errors.</span>MissingArgumentError
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MissingArgumentError(path){
  ElasticsearchError.call(this, 'Missing argument "' + path + '".');
  if(Error.captureStackTrace) Error.captureStackTrace(this, arguments.callee);
  this.name = 'MissingArgumentError';
  this.path = path;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.errors.ValidationError" id="apidoc.element.elasticsearch-odm.errors.ValidationError">
        function <span class="apidocSignatureSpan">elasticsearch-odm.errors.</span>ValidationError
        <span class="apidocSignatureSpan">(instance, errors)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ValidationError(instance, errors) {
  ElasticsearchError.call('Validation failed');
  this.stack = new Error().stack;
  this.name = 'ValidationError';
  this.errors = errors || [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.errors.ValidatorError" id="apidoc.element.elasticsearch-odm.errors.ValidatorError">
        function <span class="apidocSignatureSpan">elasticsearch-odm.errors.</span>ValidatorError
        <span class="apidocSignatureSpan">(property, reason)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ValidatortError(property, reason){
  var message = "Validator failed for property '"+ property + "'";
  if(reason) message = message + " " + reason;

  ElasticsearchError.call(this, message);
  if(Error.captureStackTrace) Error.captureStackTrace(this, arguments.callee);
  this.name = 'ValidatorError';
  this.property = property;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.errors.super_" id="apidoc.element.elasticsearch-odm.errors.super_">
        function <span class="apidocSignatureSpan">elasticsearch-odm.errors.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Error() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.isConnected" id="apidoc.module.elasticsearch-odm.isConnected">module elasticsearch-odm.isConnected</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.isConnected.isConnected" id="apidoc.element.elasticsearch-odm.isConnected.isConnected">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>isConnected
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isConnected(){
  return CONNECTED;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.logger" id="apidoc.module.elasticsearch-odm.logger">module elasticsearch-odm.logger</a></h1>










    <h2>
        <a href="#apidoc.element.elasticsearch-odm.logger.catchExceptions" id="apidoc.element.elasticsearch-odm.logger.catchExceptions">
        function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>catchExceptions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">catchExceptions = function () { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.logger.debug" id="apidoc.element.elasticsearch-odm.logger.debug">
        function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>debug
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">debug = function (msg) {
  // build argument list (level, msg, ... [string interpolate], [{metadata}], [callback])
  var args = [level].concat(Array.prototype.slice.call(arguments));
  target.log.apply(target, args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.logger.error" id="apidoc.element.elasticsearch-odm.logger.error">
        function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>error
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">error = function (msg) {
  // build argument list (level, msg, ... [string interpolate], [{metadata}], [callback])
  var args = [level].concat(Array.prototype.slice.call(arguments));
  target.log.apply(target, args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.logger.info" id="apidoc.element.elasticsearch-odm.logger.info">
        function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>info
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">info = function (msg) {
  // build argument list (level, msg, ... [string interpolate], [{metadata}], [callback])
  var args = [level].concat(Array.prototype.slice.call(arguments));
  target.log.apply(target, args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.logger.silly" id="apidoc.element.elasticsearch-odm.logger.silly">
        function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>silly
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">silly = function (msg) {
  // build argument list (level, msg, ... [string interpolate], [{metadata}], [callback])
  var args = [level].concat(Array.prototype.slice.call(arguments));
  target.log.apply(target, args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.logger.trace" id="apidoc.element.elasticsearch-odm.logger.trace">
        function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>trace
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trace = function (msg) {
  // build argument list (level, msg, ... [string interpolate], [{metadata}], [callback])
  var args = [level].concat(Array.prototype.slice.call(arguments));
  target.log.apply(target, args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            type :  parts[2] || '',
            response : status,
            queryString : parts[parts.length-1],
            queryBody : body || ''
        };
        if(status !== 200) {
          meta.responseBody = res;
          log.<span class="apidocCodeKeywordSpan">trace</span>('[ELASTICSEARCH] ' + method + ' @ ', meta);
        }
      };
      this.close = function () {  };
    };
  }
  return _.merge(clientSettings, _.omit(options, 'logging'));
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.logger.verbose" id="apidoc.element.elasticsearch-odm.logger.verbose">
        function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>verbose
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">verbose = function (msg) {
  // build argument list (level, msg, ... [string interpolate], [{metadata}], [callback])
  var args = [level].concat(Array.prototype.slice.call(arguments));
  target.log.apply(target, args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.logger.warn" id="apidoc.element.elasticsearch-odm.logger.warn">
        function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>warn
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">warn = function (msg) {
  // build argument list (level, msg, ... [string interpolate], [{metadata}], [callback])
  var args = [level].concat(Array.prototype.slice.call(arguments));
  target.log.apply(target, args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.logger.warning" id="apidoc.element.elasticsearch-odm.logger.warning">
        function <span class="apidocSignatureSpan">elasticsearch-odm.logger.</span>warning
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">warning = function (msg) {
  // build argument list (level, msg, ... [string interpolate], [{metadata}], [callback])
  var args = [level].concat(Array.prototype.slice.call(arguments));
  target.log.apply(target, args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.model" id="apidoc.module.elasticsearch-odm.model">module elasticsearch-odm.model</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.model.model" id="apidoc.element.elasticsearch-odm.model.model">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>model
        <span class="apidocSignatureSpan">(modelName, schema)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function model(modelName, schema){
  if(!modelName) throw new MissingArgumentError('modelName');
  if(schema &amp;&amp; !(schema instanceof Schema)) throw new errors.ElasticsearchError('Invalid schema for "'+modelName+'".');

  if(db.models[modelName]){

    // don't overwrite schemas on secondary calls.
    if(schema &amp;&amp; _.isEmpty(db.models[modelName].model.schema)){
      db.models[modelName].model.schema = schema;
    }

    // return model from cache if it exists.
    return db.models[modelName];
  }

  // create a neweable function object.
  function modelInstance(data){
    var self = this;
    // Add any user supplied schema instance methods.
    if(schema){
      _.assign(self, schema.methods);
    }
    Model.call(self, data);
  }
  utils.inherits(modelInstance, Model);

  // add crud/query static functions.
  _.assign(modelInstance, defaultMethods);

  modelInstance.db = db;

  modelInstance.model = {
    type: pluralize(modelName).toLowerCase(),
    name: modelName,
    constructor: modelInstance
  };

  if(schema) {
    modelInstance.model.schema = schema;
    // Add any user supplied schema static methods.
    _.assign(modelInstance, schema.statics);

    // User can provide their own type name, default is pluralized.
    if(schema.options.type) modelInstance.model.type = schema.options.type;

    // Update the mapping asynchronously.
    var mapping = {};
    mapping[modelInstance.model.type] = schema.toMapping();
    mappingQueue.push({type: modelInstance.model.type, mapping: mapping});
    // If we're already connected process the mapping queue.
    if(isConnected()){
      handleMappingQueue();
    }
  }

  return db.models[modelName] = modelInstance;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Quick Start
You'll find the API is intuitive if you've used Mongoose or Waterline.

Example (no schema):

```js
var elasticsearch = require('elasticsearch-odm');
var Car = elasticsearch.<span class="apidocCodeKeywordSpan">model</span>('Car');
var car = new Car({
type: 'Ford', color: 'Black'
});
elasticsearch.connect('my-index').then(function(){
// be sure to call connect before bootstrapping your app.
car.save().then(function(document){
  console.log(document);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.model.prototype" id="apidoc.module.elasticsearch-odm.model.prototype">module elasticsearch-odm.model.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.model.prototype.execPostHook" id="apidoc.element.elasticsearch-odm.model.prototype.execPostHook">
        function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>execPostHook
        <span class="apidocSignatureSpan">(name, context)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">execPostHook = function (name, context) {
  var self = this;
  if(self.constructor.model.schema &amp;&amp; self.constructor.model.schema.hooks){
    self.constructor.model.schema.hooks.execPost(name, null, [context], function(){
      // null callback for post hooks, like mongoose.
    });
  }
  return void 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }

  return self.constructor.create(document, options);
})
.then(function(result) {
  self.isNew = false;
  _.assign(self, result);
  self.<span class="apidocCodeKeywordSpan">execPostHook</span>('save', self);
  return self;
});
};

Model.prototype.update = function(data, options) {
var self = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.model.prototype.execPreHook" id="apidoc.element.elasticsearch-odm.model.prototype.execPreHook">
        function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>execPreHook
        <span class="apidocSignatureSpan">(name, context)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">execPreHook = function (name, context) {
  var self = this;
  return new Promise(function(resolve, reject){
    if(self.constructor.model.schema &amp;&amp; self.constructor.model.schema.hooks){
      self.constructor.model.schema.hooks.execPre(name, context, function(err) {
        return err ? reject(err) : resolve();
      });
    }else{
      return resolve();
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if(self.id){
// If the user is trying to create a new model with a forced id,
// then this only acts as an alias to the .set() function.
return self.constructor.set(self.toObject(), options);
  }

  return self.<span class="apidocCodeKeywordSpan">execPreHook</span>('save', self)
  .then(function(){
var document = self.toObject();

// Schemas aren't requried, so check if it's defined.
if(self.constructor.model.schema){
  var errors = self.validate(document);
  if(errors) return Promise.reject(errors);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.model.prototype.remove" id="apidoc.element.elasticsearch-odm.model.prototype.remove">
        function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>remove
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function () {
  var self = this;
  return self.execPreHook('remove', self)
  .then(function(){
    return self.constructor.remove(self.id);
  })
  .then(function(){
    // don't pass instances to post remove hook, only Objects.
    // also make sure to pass the document before we remove it's id.
    self.execPostHook('remove', self.toObject());
    delete self.id;
    delete self._id;
    self.isNew = true;
    return self;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.model(String modelName)`](#modelstring-modelname-optionalschema-schema---model)
- [`.client`](#client---elasticsearch)
- [`.stats()`](#stats)
- [`.createIndex(String index, Object mappings)`](#createindexstring-index-object-mappings)
- [`.removeIndex(String index)`](#removeindexstring-index)
- [Document](#document)
- [`.save()`](#save-document)
- [`.<span class="apidocCodeKeywordSpan">remove</span>()`](#remove)
- [`.update(Object data)`](#updateobject-data---document)
- [`.set(Object data)`](#setobject-data---document)
- [`.toObject()`](#toobject)
- [Model](#model)
- [`.count()`](#count---object)
- [`.create(Object data)`](#createobject-data---document)
- [`.update(String id, Object data)`](#updatestring-id-object-data---document)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.model.prototype.save" id="apidoc.element.elasticsearch-odm.model.prototype.save">
        function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>save
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">save = function (options) {
  var self = this;

  if(!self.isNew){
    return self.update(self.toObject());
  }

  if(self.id){
    // If the user is trying to create a new model with a forced id,
    // then this only acts as an alias to the .set() function.
    return self.constructor.set(self.toObject(), options);
  }

  return self.execPreHook('save', self)
  .then(function(){
    var document = self.toObject();

    // Schemas aren't requried, so check if it's defined.
    if(self.constructor.model.schema){
      var errors = self.validate(document);
      if(errors) return Promise.reject(errors);
    }

    return self.constructor.create(document, options);
  })
  .then(function(result) {
    self.isNew = false;
    _.assign(self, result);
    self.execPostHook('save', self);
    return self;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var elasticsearch = require('elasticsearch-odm');
var Car = elasticsearch.model('Car');
var car = new Car({
  type: 'Ford', color: 'Black'
});
elasticsearch.connect('my-index').then(function(){
  // be sure to call connect before bootstrapping your app.
  car.<span class="apidocCodeKeywordSpan">save</span>().then(function(document){
    console.log(document);
  });
});
```
Example (using a [schema](#schemas)):

```js
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.model.prototype.set" id="apidoc.element.elasticsearch-odm.model.prototype.set">
        function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>set
        <span class="apidocSignatureSpan">(data, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set = function (data, options) {
  var self = this;

  if(self.isNew){
    // User should be calling .save() insead, so redirect them.
    _.assign(self, data);
    return self.save();
  }

  var document = self.toObject();

  // Add any required keys to the new data.
  _.assign(data, {
    id: self.id,
    createdOn: self.createdOn,
    updatedOn: self.updatedOn,
  });

  // Find out any removed keys and delete them from current instance
  // and the document to be sent.
  var currentKeys = Object.keys(document);
  var newKeys = Object.keys(data);
  var deletedKeys = _.difference(currentKeys, newKeys);
  _.forEach(deletedKeys, function(k){
    delete self[k];
    delete document[k];
  });

  // Now we can assign the object to be sent.
  _.assign(document, data);

  return self.constructor.set(self.id, document, options)
  .then(function(result) {
    return _.assign(self, result);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.stats()`](#stats)
- [`.createIndex(String index, Object mappings)`](#createindexstring-index-object-mappings)
- [`.removeIndex(String index)`](#removeindexstring-index)
- [Document](#document)
- [`.save()`](#save-document)
- [`.remove()`](#remove)
- [`.update(Object data)`](#updateobject-data---document)
- [`.<span class="apidocCodeKeywordSpan">set</span>(Object data)`](#setobject-data---document)
- [`.toObject()`](#toobject)
- [Model](#model)
- [`.count()`](#count---object)
- [`.create(Object data)`](#createobject-data---document)
- [`.update(String id, Object data)`](#updatestring-id-object-data---document)
- [`.remove(String id)`](#removestring-id)
- [`.removeByIds(Array ids)`](#removebyidsarray-id)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.model.prototype.toJSON" id="apidoc.element.elasticsearch-odm.model.prototype.toJSON">
        function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  return this.toObject();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.model.prototype.toObject" id="apidoc.element.elasticsearch-odm.model.prototype.toObject">
        function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>toObject
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toObject = function () {
  return _.cloneDeep(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.createIndex(String index, Object mappings)`](#createindexstring-index-object-mappings)
- [`.removeIndex(String index)`](#removeindexstring-index)
- [Document](#document)
- [`.save()`](#save-document)
- [`.remove()`](#remove)
- [`.update(Object data)`](#updateobject-data---document)
- [`.set(Object data)`](#setobject-data---document)
- [`.<span class="apidocCodeKeywordSpan">toObject</span>()`](#toobject)
- [Model](#model)
- [`.count()`](#count---object)
- [`.create(Object data)`](#createobject-data---document)
- [`.update(String id, Object data)`](#updatestring-id-object-data---document)
- [`.remove(String id)`](#removestring-id)
- [`.removeByIds(Array ids)`](#removebyidsarray-id)
- [`.set(String id)`](#setstring-id-object-data---document)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.model.prototype.update" id="apidoc.element.elasticsearch-odm.model.prototype.update">
        function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>update
        <span class="apidocSignatureSpan">(data, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (data, options) {
  var self = this;

  // Schemas aren't requried, so check if it's defined.
  if(self.constructor.model.schema){
    var document = _.assign({}, self.toObject(), data);
    var errors = self.validate(document, true);
    if(errors) return Promise.reject(errors);
  }

  return self.constructor.update(self.id, data, options)
  .then(function(result) {
    self.isNew = false;
    return _.assign(self, result);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`.client`](#client---elasticsearch)
- [`.stats()`](#stats)
- [`.createIndex(String index, Object mappings)`](#createindexstring-index-object-mappings)
- [`.removeIndex(String index)`](#removeindexstring-index)
- [Document](#document)
- [`.save()`](#save-document)
- [`.remove()`](#remove)
- [`.<span class="apidocCodeKeywordSpan">update</span>(Object data)`](#updateobject-data---document)
- [`.set(Object data)`](#setobject-data---document)
- [`.toObject()`](#toobject)
- [Model](#model)
- [`.count()`](#count---object)
- [`.create(Object data)`](#createobject-data---document)
- [`.update(String id, Object data)`](#updatestring-id-object-data---document)
- [`.remove(String id)`](#removestring-id)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.model.prototype.validate" id="apidoc.element.elasticsearch-odm.model.prototype.validate">
        function <span class="apidocSignatureSpan">elasticsearch-odm.model.prototype.</span>validate
        <span class="apidocSignatureSpan">(doc, partial)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function (doc, partial) {
  if(this.constructor.model.schema){
    return this.constructor.model.schema.validate(doc, partial);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
  }
  return void 0;
};

Model.prototype.validate = function(doc, partial) {
  if(this.constructor.model.schema){
    return this.constructor.model.schema.<span class="apidocCodeKeywordSpan">validate</span>(doc, partial);
  }
};

Model.prototype.toObject = function() {
  return _.cloneDeep(this);
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.query" id="apidoc.module.elasticsearch-odm.query">module elasticsearch-odm.query</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.query.QueryPromise" id="apidoc.element.elasticsearch-odm.query.QueryPromise">
        function <span class="apidocSignatureSpan">elasticsearch-odm.query.</span>QueryPromise
        <span class="apidocSignatureSpan">(query, func)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function QueryPromise(query, func){
  // We wrap a promise for the query. To allow chaining of methonds
  // in between the 'then-able'. func argument takes a single query argument
  // and returns a promise that is resolved with the found document.
  // This allows calls like, .find().sort().then(...)

  var self = this;
  self.q = _.cloneDeep(query);
  self.p = {
    resolve: function(){},
    reject: function(){}
  };
  self.isExecuted = false;

  self._exec = function(){
    if(!self.isExecuted){
      self.isExecuted = true;

<span class="apidocCodeCommentSpan">      /**
      if(self.q.body){;
        process.nextTick(function(){
          console.log(utils.inspect(self.q.body.query.filtered, { showHidden: true, depth: null }));
        });
      }
      */
</span>
      func(self.q)
      .then(function(res){
        self.p.resolve(res);
      })
      .catch(function(err){
        self.p.reject(err);
      });
    }
  };

  self.then = function(resolve, reject){
    var promise = new Promise(function(success, error){
      self.p.resolve = success;
      self.p.reject = error;
      self._exec();
    });

    return promise.then(resolve, reject);
  };

  self.populate = function(value){
    addPopulations(self.q, value);
    return self;
  };

  self.must = function(value){
    addTermFilters(self.q, value);
    return self;
  };

  self.missing = function(value){
    addExistenceFilters(self.q, value);
    return self;
  };

  self.exists = function(value){
    addExistenceFilters(self.q, null, value);
    return self;
  };

  self.not = function(value){
    addTermFilters(self.q, null, value);
    return self;
  };

  self.sort = function(value){
    addSorts(self.q, value);
    return self;
  };

  // If .then() is never called, make sure we execute the query.
  // This allows the '.findAndRemove' type queries to still work
  // even when .then() is never called.
  process.nextTick(function(){
    self._exec();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
},

find: function(match, queryOptions) {
  var self = this;
  queryOptions = _.isPlainObject(queryOptions) ? queryOptions : {};
  var query = Query.parseRequest(self.db.index, self.model.type, match, queryOptions);

  return new Query.<span class="apidocCodeKeywordSpan">QueryPromise</span>(query, function(q){
    return self.search(queryOptions, q);
  });
},

findAndRemove: function(match, queryOptions, options) {
  if( _.isEmpty(match) &amp;&amp; _.isEmpty(queryOptions) ) return Promise.reject(new MissingArgumentError('match'));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.query.addExistenceFilters" id="apidoc.element.elasticsearch-odm.query.addExistenceFilters">
        function <span class="apidocSignatureSpan">elasticsearch-odm.query.</span>addExistenceFilters
        <span class="apidocSignatureSpan">(req, missingFilters, existsFilters)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function addExistenceFilters(req, missingFilters, existsFilters){
  // see https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-missing-filter.html
  // and https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-filters.html

  // is this a filtered query, or a regulat?
  var boolFilter = dot.pick('body.query.filtered', req);

  var getPreviousFilters = function(){
    var andFilters;
    if(boolFilter){
      andFilters = dot.pick('body.query.filtered.query.constant_score.filter.and', req);
    }else{
      andFilters = dot.pick('body.query.constant_score.filter.and', req);
    }
    return andFilters || [];
  };

  var query = {
    constant_score: {
      filter: {
        and: getPreviousFilters()
      }
    }
  };

  var makeFilter = function(name, filters){;
    if(filters){
      filters = _.isArray(filters) ? filters : [filters];
      _.forEach(filters, function(v){
        var f = {};
        f[name] = {field: v};
        query.constant_score.filter.and.push(f);
      });
    }
  };

  makeFilter('missing', missingFilters);
  makeFilter('exists', existsFilters);

  if(boolFilter){
    req.body.query.filtered.query = query;
  }else{
    req.body.query = query;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.query.addPagination" id="apidoc.element.elasticsearch-odm.query.addPagination">
        function <span class="apidocSignatureSpan">elasticsearch-odm.query.</span>addPagination
        <span class="apidocSignatureSpan">(req, page, per_page)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function addPagination(req, page, per_page){
  if(!page &amp;&amp; !per_page) return void 0;
  page = isNaN(parseInt(page)) || (page &lt;= 0) ? 1 : parseInt(page);
  per_page = isNaN(parseInt(per_page)) || (per_page &lt;= 1) ? 10 : parseInt(per_page);
  req.from =  (page - 1) * per_page;
  req.size = per_page;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.query.addPopulations" id="apidoc.element.elasticsearch-odm.query.addPopulations">
        function <span class="apidocSignatureSpan">elasticsearch-odm.query.</span>addPopulations
        <span class="apidocSignatureSpan">(req, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function addPopulations(req, value){
  if(!req.populate) req.populate = [];
  req.populate.push(value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.query.addSorts" id="apidoc.element.elasticsearch-odm.query.addSorts">
        function <span class="apidocSignatureSpan">elasticsearch-odm.query.</span>addSorts
        <span class="apidocSignatureSpan">(req, sorts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function addSorts(req, sorts){
  sorts = _.isString(sorts) ? [sorts] : sorts;

  var result = {
    sort: []
  };

  var makeSort = function(sort){
    var item = {}, order;
    if(_.startsWith(sort, '-')){
      sort = sort.substring(1);
      order = 'desc';
    }else{
      order = 'asc';
    }
    item[sort] = {order: order, ignore_unmapped: true};
    return item;
  };

  result.sort = _.map(sorts, makeSort);

  if(result.sort.length === 1){
    result.sort = result.sort[0];
  }

  if(_.isArray(req.body.sort)){
    req.body.sort = req.body.sort.concat(result.sort);
  }else{
    req.body.sort = result.sort;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.query.addTermFilters" id="apidoc.element.elasticsearch-odm.query.addTermFilters">
        function <span class="apidocSignatureSpan">elasticsearch-odm.query.</span>addTermFilters
        <span class="apidocSignatureSpan">(req, mustFilters, notFilters)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function addTermFilters(req, mustFilters, notFilters){
  var filter = {
    bool: {
      must: [],
      must_not: []
    }
  };

  var makeTermFilter = function(v, k){
    var f = {};
    if(_.isArray(v)){
      f.terms = {};
      f.terms[k] = v;
    }else{
      f.term = {};
      f.term[k] = v;
    }
    return f;
  };

  filter.bool.must = _.map(mustFilters, makeTermFilter);
  filter.bool.must_not = _.map(notFilters, makeTermFilter);

  // Remove any empty filters, Elasticsearch will throw an error.
  _.each(filter.bool, function(v, k) {
    if(!v || !v.length) delete filter.bool[k];
  });

  // No filters found? return now.
  if(_.isEmpty(filter.bool)) return void 0;

  // Is this a new filtered query, or an existing to merge with?
  var boolFilter = dot.pick('body.query.filtered.filter.bool', req);

  var mergeFilter = function(filterName, data){
    if( _.isArray(boolFilter[filterName]) ){
      req.body.query.filtered.filter.bool[filterName] = req.body.query.filtered.filter.bool[filterName].concat(data);
    }else if( _.isPlainObject(boolFilter[filterName]) ){
      req.body.query.filtered.filter.bool[filterName] = [boolFilter[filterName]];
      req.body.query.filtered.filter.bool[filterName] = req.body.query.filtered.filter.bool[filterName].concat(data);
    }else{
      req.body.query.filtered.filter.bool[filterName] = data;
    }
  };

  if(boolFilter){
    if(filter.bool.must) mergeFilter('must', filter.bool.must);
    if(filter.bool.must_not) mergeFilter('must_not', filter.bool.must_not);
  }else{
    req.body.query = {
      filtered: {
        query: req.body.query,
        filter: filter
      }
    };
  }

  ///Pretty sure elasticsearch doesn't allow arrays for 'must' when only one rule is added.
  if(req.body.query.filtered.filter.bool.must
    &amp;&amp; req.body.query.filtered.filter.bool.must.length === 1){
    req.body.query.filtered.filter.bool.must = req.body.query.filtered.filter.bool.must[0];
  }
  if(req.body.query.filtered.filter.bool.must_not &amp;&amp; req.body.query.filtered.filter.bool.must_not.length === 1){
    req.body.query.filtered.filter.bool.must_not = req.body.query.filtered.filter.bool.must_not[0];
  }

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.query.parseRequest" id="apidoc.element.elasticsearch-odm.query.parseRequest">
        function <span class="apidocSignatureSpan">elasticsearch-odm.query.</span>parseRequest
        <span class="apidocSignatureSpan">(indices, types, matches, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseRequest(indices, types, matches, options){
  options = options || {};
  var req = {
    index: indices,
    type: types,
    body: {
      query: {match_all: {}}
    }
  };

  var allowedOptions = [];

  if(options.id){
    allowedOptions = [
      'id',
      'fields',
      'populate'
    ];
  }else if(options.ids){
    allowedOptions = [
      'ids',
      'fields',
      'populate',
      'sort',
      'page',
      'per_page'
    ];
  }else{
    allowedOptions = [
      'missing',
      'exists',
      'must',
      'not',
      'fields',
      'sort',
      'page',
      'per_page',
      'q',
      'populate'
    ];
  }
  options = _.pick(options, allowedOptions);

  if(options.id) req.id = options.id;
  if(options.ids) {
    req.body.query = {
      ids: {
        values: options.ids
      }
    };
  }

  if(!_.isEmpty(matches)){
    if(_.isString(matches)) options.q = matches;
    if(_.isPlainObject(matches)) options.must = _.merge({}, options.must, matches);
  }

  if(options.q &amp;&amp; _.isString(options.q)){
    // escape any special characters in the query string
    // see https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html
    options.q = utils.escapeQueryStringQuery(options.q);
    req.body.query = { query_string: {query: options.q} };
  }

  if(options.fields){
    req.body.fields = _.isArray(options.fields) ? options.fields : [options.fields];
  }

  if(options.sort){
    addSorts(req, options.sort);
  }

  if(options.page || options.per_page){
    addPagination(req, options.page, options.per_page);
  }

  if(options.must || options.not){
    addTermFilters(req, options.must, options.not, options.missing, options.exists);
  }

  if(options.missing || options.exists){
    addExistenceFilters(req, options.missing, options.exists);
  }

  if(!req.hasOwnProperty('size')) {
    // NOTE: we use a high number as our default to return everything
    // because mongoose also does so.
    req.size = 999999;
    req.from = 0;
  }

  return req;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return results;
  });
},

find: function(match, queryOptions) {
  var self = this;
  queryOptions = _.isPlainObject(queryOptions) ? queryOptions : {};
  var query = Query.<span class="apidocCodeKeywordSpan">parseRequest</span>(self.db.index, self.model.type, match, queryOptions);

  return new Query.QueryPromise(query, function(q){
    return self.search(queryOptions, q);
  });
},

findAndRemove: function(match, queryOptions, options) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.query.parseResponse" id="apidoc.element.elasticsearch-odm.query.parseResponse">
        function <span class="apidocSignatureSpan">elasticsearch-odm.query.</span>parseResponse
        <span class="apidocSignatureSpan">(options, query, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseResponse(options, query, res){
  if(query.body &amp;&amp; query.body.fields){
    // elasticsearch wraps field queries in its own body, so we clean it up a bit.
    // all in the name of an easy to use API
    res.hits.hits = _.chain(res.hits.hits)
      .pluck('fields')
      .map(function(_v){
        return _.map(_v, function(v, k){
          var item = {};
          if(_.isArray(v) &amp;&amp; v.length === 1){
            item[k] = v[0];
          }else{
            item[k] = v;
          }
          return item;
        });
      })
      .flatten()
      .value();
  }

  // if _source exists, set the item as _source
  res.hits.hits = _.map(res.hits.hits, function(v){
    return v._source || v;
  });

  if(options &amp;&amp; (options.page || options.per_page)){
    return new PagedResponse({
      total: res.hits.total,
      hits: res.hits.hits,
      page: options.page,
      pages: Math.ceil(res.hits.total / query.size)
    });
  }else{
    return res.hits.hits;
  }

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
  },

  search: function(queryOptions, query){
    var self = this;
    return self.db.client.search(query).then(function(results) {

results = Query.<span class="apidocCodeKeywordSpan">parseResponse</span>(queryOptions, query, results);
// is this a pages request or normal?
if (queryOptions &amp;&amp; (queryOptions.page || queryOptions.per_page)) {
  if (results.hits.length) {
    results.hits = self.makeInstance(results.hits);
  }
} else {
  results = self.makeInstance(results);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.removeIndex" id="apidoc.module.elasticsearch-odm.removeIndex">module elasticsearch-odm.removeIndex</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.removeIndex.removeIndex" id="apidoc.element.elasticsearch-odm.removeIndex.removeIndex">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>removeIndex
        <span class="apidocSignatureSpan">(index)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function removeIndex(index){
  if(!index) return Promise.reject(new MissingArgumentError('index'));
  if(!isConnected()) return Promise.reject(new ConnectionError(db.host));

  return db.client.indices.delete({index: index}).catch(function(){});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [Core](#core)
  - [`.connect(String/Object options)`](#connectstringobject-options---promise)
  - [`new Schema(Object options)`](#new-schemaobject-options---schema)
  - [`.model(String modelName)`](#modelstring-modelname-optionalschema-schema---model)
  - [`.client`](#client---elasticsearch)
  - [`.stats()`](#stats)
  - [`.createIndex(String index, Object mappings)`](#createindexstring-index-object-mappings)
  - [`.<span class="apidocCodeKeywordSpan">removeIndex</span>(String index)`](#removeindexstring-index)
- [Document](#document)
  - [`.save()`](#save-document)
  - [`.remove()`](#remove)
  - [`.update(Object data)`](#updateobject-data---document)
  - [`.set(Object data)`](#setobject-data---document)
  - [`.toObject()`](#toobject)
- [Model](#model)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.schema_types" id="apidoc.module.elasticsearch-odm.schema_types">module elasticsearch-odm.schema_types</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.schema_types.BinaryType" id="apidoc.element.elasticsearch-odm.schema_types.BinaryType">
        function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>BinaryType
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BinaryType(options){
  Type.call(this, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.schema_types.BooleanType" id="apidoc.element.elasticsearch-odm.schema_types.BooleanType">
        function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>BooleanType
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BooleanType(options){
  Type.call(this, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.schema_types.ByteType" id="apidoc.element.elasticsearch-odm.schema_types.ByteType">
        function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>ByteType
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ByteType(options){
  NumberType.call(this, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.schema_types.DateType" id="apidoc.element.elasticsearch-odm.schema_types.DateType">
        function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>DateType
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DateType(options){
  Type.call(this, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.schema_types.DoubleType" id="apidoc.element.elasticsearch-odm.schema_types.DoubleType">
        function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>DoubleType
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DoubleType(options){
  NumberType.call(this, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.schema_types.FloatType" id="apidoc.element.elasticsearch-odm.schema_types.FloatType">
        function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>FloatType
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function FloatType(options){
  NumberType.call(this, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.schema_types.GeoPointType" id="apidoc.element.elasticsearch-odm.schema_types.GeoPointType">
        function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>GeoPointType
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function GeoPointType(options){
  Type.call(this, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.schema_types.IntegerType" id="apidoc.element.elasticsearch-odm.schema_types.IntegerType">
        function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>IntegerType
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function IntegerType(options){
  NumberType.call(this, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.schema_types.LongType" id="apidoc.element.elasticsearch-odm.schema_types.LongType">
        function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>LongType
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function LongType(options){
  NumberType.call(this, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.schema_types.ObjectType" id="apidoc.element.elasticsearch-odm.schema_types.ObjectType">
        function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>ObjectType
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ObjectType(options){
  Type.call(this, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.schema_types.ShortType" id="apidoc.element.elasticsearch-odm.schema_types.ShortType">
        function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>ShortType
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ShortType(options){
  NumberType.call(this, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.schema_types.StringType" id="apidoc.element.elasticsearch-odm.schema_types.StringType">
        function <span class="apidocSignatureSpan">elasticsearch-odm.schema_types.</span>StringType
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StringType(options){
  Type.call(this, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.stats" id="apidoc.module.elasticsearch-odm.stats">module elasticsearch-odm.stats</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.stats.stats" id="apidoc.element.elasticsearch-odm.stats.stats">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>stats
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stats(){
  if(!isConnected()) return Promise.reject(new ConnectionError(db.host));
  return db.client.indices.stats({index:db.index});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```
## API Reference
- [Core](#core)
- [`.connect(String/Object options)`](#connectstringobject-options---promise)
- [`new Schema(Object options)`](#new-schemaobject-options---schema)
- [`.model(String modelName)`](#modelstring-modelname-optionalschema-schema---model)
- [`.client`](#client---elasticsearch)
- [`.<span class="apidocCodeKeywordSpan">stats</span>()`](#stats)
- [`.createIndex(String index, Object mappings)`](#createindexstring-index-object-mappings)
- [`.removeIndex(String index)`](#removeindexstring-index)
- [Document](#document)
- [`.save()`](#save-document)
- [`.remove()`](#remove)
- [`.update(Object data)`](#updateobject-data---document)
- [`.set(Object data)`](#setobject-data---document)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.status" id="apidoc.module.elasticsearch-odm.status">module elasticsearch-odm.status</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.status.status" id="apidoc.element.elasticsearch-odm.status.status">
        function <span class="apidocSignatureSpan">elasticsearch-odm.</span>status
        <span class="apidocSignatureSpan">(type)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function status(type){
  if(!isConnected()) return Promise.reject(new ConnectionError(db.host));

  var args = {index: db.index};
  if(type) args.type = type;
  return db.client.indices.status(args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

function status(type){
if(!isConnected()) return Promise.reject(new ConnectionError(db.host));

var args = {index: db.index};
if(type) args.type = type;
return db.client.indices.<span class="apidocCodeKeywordSpan">status</span>(args);
}

function createIndex(index, mappings){
if(!index) return Promise.reject(new MissingArgumentError('index'));
if(!isConnected()) return Promise.reject(new ConnectionError(db.host));

return db.client.indices.create({
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.elasticsearch-odm.utils" id="apidoc.module.elasticsearch-odm.utils">module elasticsearch-odm.utils</a></h1>


    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils._errnoException" id="apidoc.element.elasticsearch-odm.utils._errnoException">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>_errnoException
        <span class="apidocSignatureSpan">(err, syscall, original)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_errnoException = function (err, syscall, original) {
  var errname = uv.errname(err);
  var message = `${syscall} ${errname}`;
  if (original)
    message += ' ' + original;
  var e = new Error(message);
  e.code = errname;
  e.errno = errname;
  e.syscall = syscall;
  return e;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils._exceptionWithHostPort" id="apidoc.element.elasticsearch-odm.utils._exceptionWithHostPort">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>_exceptionWithHostPort
        <span class="apidocSignatureSpan">(err, syscall, address, port, additional)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_exceptionWithHostPort = function (err, syscall, address, port, additional) {
  var details;
  if (port &amp;&amp; port &gt; 0) {
    details = `${address}:${port}`;
  } else {
    details = address;
  }

  if (additional) {
    details += ` - Local (${additional})`;
  }
  var ex = exports._errnoException(err, syscall, details);
  ex.address = address;
  if (port) {
    ex.port = port;
  }
  return ex;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils._extend" id="apidoc.element.elasticsearch-odm.utils._extend">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>_extend
        <span class="apidocSignatureSpan">(target, source)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_extend = function (target, source) {
  // Don't do anything if source isn't an object
  if (source === null || typeof source !== 'object') return target;

  var keys = Object.keys(source);
  var i = keys.length;
  while (i--) {
    target[keys[i]] = source[keys[i]];
  }
  return target;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.debug" id="apidoc.element.elasticsearch-odm.utils.debug">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>debug
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function deprecated() {
  warned = exports.printDeprecationMessage(msg, warned, deprecated);
  if (new.target) {
    return Reflect.construct(fn, arguments, new.target);
  }
  return fn.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.debuglog" id="apidoc.element.elasticsearch-odm.utils.debuglog">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>debuglog
        <span class="apidocSignatureSpan">(set)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">debuglog = function (set) {
  if (debugEnviron === undefined)
    debugEnviron = process.env.NODE_DEBUG || '';
  set = set.toUpperCase();
  if (!debugs[set]) {
    if (new RegExp(`\\b${set}\\b`, 'i').test(debugEnviron)) {
      var pid = process.pid;
      debugs[set] = function() {
        var msg = exports.format.apply(exports, arguments);
        console.error('%s %d: %s', set, pid, msg);
      };
    } else {
      debugs[set] = function() {};
    }
  }
  return debugs[set];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.deprecate" id="apidoc.element.elasticsearch-odm.utils.deprecate">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>deprecate
        <span class="apidocSignatureSpan">(fn, msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deprecate = function (fn, msg) {
  // Allow for deprecating things in the process of starting up.
  if (global.process === undefined) {
    return function() {
      return exports._deprecate(fn, msg).apply(this, arguments);
    };
  }

  if (process.noDeprecation === true) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    warned = exports.printDeprecationMessage(msg, warned, deprecated);
    if (new.target) {
      return Reflect.construct(fn, arguments, new.target);
    }
    return fn.apply(this, arguments);
  }

  // The wrapper will keep the same prototype as fn to maintain prototype chain
  Object.setPrototypeOf(deprecated, fn);
  if (fn.prototype) {
    // Setting this (rather than using Object.setPrototype, as above) ensures
    // that calling the unwrapped constructor gives an instanceof the wrapped
    // constructor.
    deprecated.prototype = fn.prototype;
  }

  return deprecated;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.error" id="apidoc.element.elasticsearch-odm.utils.error">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>error
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function deprecated() {
  warned = exports.printDeprecationMessage(msg, warned, deprecated);
  if (new.target) {
    return Reflect.construct(fn, arguments, new.target);
  }
  return fn.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.escapeQueryStringQuery" id="apidoc.element.elasticsearch-odm.utils.escapeQueryStringQuery">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>escapeQueryStringQuery
        <span class="apidocSignatureSpan">(query)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeQueryStringQuery(query){
var regexString,
    regex;

  // Taken from https://github.com/lanetix/ng-elasticsearch-sanitize/blob/master/src/ng-elastic-escape.js
  query = query
    .replace(/([-!(){}\[\]^"~*?:\+\/\\])/g, '\\$1') // replace single character special characters
    .replace(/(\|\|)/g, '\\$1') // replace ||
    .replace(/(\&amp;\&amp;)/g, '\\$1'); // replace &amp;&amp;
  _.map(['AND', 'OR', 'NOT'], function (operator) {
    regexString = 's*\\b(' + operator + ')\\b\\s*'
    regex = new RegExp(regexString, 'g');
    query = query.replace(regex,
      _.map(operator.split(''),
        function (ch) {
          return '\\' + ch;
        }
      ).join('') +' '
    )
  });
  return query;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if(_.isString(matches)) options.q = matches;
  if(_.isPlainObject(matches)) options.must = _.merge({}, options.must, matches);
}

if(options.q &amp;&amp; _.isString(options.q)){
  // escape any special characters in the query string
  // see https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html
  options.q = utils.<span class="apidocCodeKeywordSpan">escapeQueryStringQuery</span>(options.q);
  req.body.query = { query_string: {query: options.q} };
}

if(options.fields){
  req.body.fields = _.isArray(options.fields) ? options.fields : [options.fields];
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.forAll" id="apidoc.element.elasticsearch-odm.utils.forAll">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>forAll
        <span class="apidocSignatureSpan">(obj, callback, currentPath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function forAll(obj, callback, currentPath) {
  // calls back for every nested object.
  if (!currentPath) currentPath = [];
  if (obj) Object.keys(obj).forEach(compute);

  function compute(key) {
    var value = obj[key];
    if (typeof value !== 'object') {
      callback(currentPath, key, obj);
    } else {
      var path = currentPath.slice(0);
      path.push(key);
      forAll(value, callback, path);
    }
  }

  return void 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.format" id="apidoc.element.elasticsearch-odm.utils.format">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>format
        <span class="apidocSignatureSpan">(f)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">format = function (f) {
  if (typeof f !== 'string') {
    const objects = new Array(arguments.length);
    for (var index = 0; index &lt; arguments.length; index++) {
      objects[index] = inspect(arguments[index]);
    }
    return objects.join(' ');
  }

  var argLen = arguments.length;

  if (argLen === 1) return f;

  var str = '';
  var a = 1;
  var lastPos = 0;
  for (var i = 0; i &lt; f.length;) {
    if (f.charCodeAt(i) === 37/*'%'*/ &amp;&amp; i + 1 &lt; f.length) {
      switch (f.charCodeAt(i + 1)) {
        case 100: // 'd'
          if (a &gt;= argLen)
            break;
          if (lastPos &lt; i)
            str += f.slice(lastPos, i);
          str += Number(arguments[a++]);
          lastPos = i = i + 2;
          continue;
        case 106: // 'j'
          if (a &gt;= argLen)
            break;
          if (lastPos &lt; i)
            str += f.slice(lastPos, i);
          str += tryStringify(arguments[a++]);
          lastPos = i = i + 2;
          continue;
        case 115: // 's'
          if (a &gt;= argLen)
            break;
          if (lastPos &lt; i)
            str += f.slice(lastPos, i);
          str += String(arguments[a++]);
          lastPos = i = i + 2;
          continue;
        case 37: // '%'
          if (lastPos &lt; i)
            str += f.slice(lastPos, i);
          str += '%';
          lastPos = i = i + 2;
          continue;
      }
    }
    ++i;
  }
  if (lastPos === 0)
    str = f;
  else if (lastPos &lt; f.length)
    str += f.slice(lastPos);
  while (a &lt; argLen) {
    const x = arguments[a++];
    if (x === null || (typeof x !== 'object' &amp;&amp; typeof x !== 'symbol')) {
      str += ' ' + x;
    } else {
      str += ' ' + inspect(x);
    }
  }
  return str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.inRange" id="apidoc.element.elasticsearch-odm.utils.inRange">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>inRange
        <span class="apidocSignatureSpan">(v, min, max)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function inRange(v, min, max) {
  return v &gt;= min &amp;&amp; v &lt;= max;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.inherits" id="apidoc.element.elasticsearch-odm.utils.inherits">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>inherits
        <span class="apidocSignatureSpan">(ctor, superCtor)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inherits = function (ctor, superCtor) {

  if (ctor === undefined || ctor === null)
    throw new TypeError('The constructor to "inherits" must not be ' +
                        'null or undefined');

  if (superCtor === undefined || superCtor === null)
    throw new TypeError('The super constructor to "inherits" must not ' +
                        'be null or undefined');

  if (superCtor.prototype === undefined)
    throw new TypeError('The super constructor to "inherits" must ' +
                        'have a prototype');

  ctor.super_ = superCtor;
  Object.setPrototypeOf(ctor.prototype, superCtor.prototype);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  var self = this;
  // Add any user supplied schema instance methods.
  if(schema){
    _.assign(self, schema.methods);
  }
  Model.call(self, data);
}
utils.<span class="apidocCodeKeywordSpan">inherits</span>(modelInstance, Model);

// add crud/query static functions.
_.assign(modelInstance, defaultMethods);

modelInstance.db = db;

modelInstance.model = {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.inspect" id="apidoc.element.elasticsearch-odm.utils.inspect">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>inspect
        <span class="apidocSignatureSpan">(obj, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function inspect(obj, opts) {
  // default options
  var ctx = {
    seen: [],
    stylize: stylizeNoColor
  };
  // legacy...
  if (arguments[2] !== undefined) ctx.depth = arguments[2];
  if (arguments[3] !== undefined) ctx.colors = arguments[3];
  if (typeof opts === 'boolean') {
    // legacy...
    ctx.showHidden = opts;
  }
  // Set default and user-specified options
  ctx = Object.assign({}, inspect.defaultOptions, ctx, opts);
  if (ctx.colors) ctx.stylize = stylizeWithColor;
  if (ctx.maxArrayLength === null) ctx.maxArrayLength = Infinity;
  return formatValue(ctx, obj, ctx.depth);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  self._exec = function(){
    if(!self.isExecuted){
self.isExecuted = true;

/**
if(self.q.body){;
  process.nextTick(function(){
    console.log(utils.<span class="apidocCodeKeywordSpan">inspect</span>(self.q.body.query.filtered, { showHidden: true, depth:
null }));
  });
}
*/

func(self.q)
.then(function(res){
  self.p.resolve(res);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isArray" id="apidoc.element.elasticsearch-odm.utils.isArray">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isArray
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isArray() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (queryOptions &amp;&amp; (queryOptions.page || queryOptions.per_page)) {
      if (results.hits.length) {
        results.hits = self.makeInstance(results.hits);
      }
    } else {
      results = self.makeInstance(results);
      // this method will always return an array.
      if (!_.<span class="apidocCodeKeywordSpan">isArray</span>(results)) results = [results];
    }
    return results;
  });
},

find: function(match, queryOptions) {
  var self = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isBase64" id="apidoc.element.elasticsearch-odm.utils.isBase64">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isBase64
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isBase64(v){
  return expressions.base64.test(v);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isBoolean" id="apidoc.element.elasticsearch-odm.utils.isBoolean">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isBoolean
        <span class="apidocSignatureSpan">(arg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isBoolean(arg) {
  return typeof arg === 'boolean';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isBuffer" id="apidoc.element.elasticsearch-odm.utils.isBuffer">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isBuffer
        <span class="apidocSignatureSpan">(b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isBuffer(b) {
  return b instanceof Buffer;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isByte" id="apidoc.element.elasticsearch-odm.utils.isByte">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isByte
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isByte(v){
  return isInteger(v) &amp;&amp; inRange(v, -128, 127);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isDate" id="apidoc.element.elasticsearch-odm.utils.isDate">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isDate
        <span class="apidocSignatureSpan">(d)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isDate(d) {
  return binding.isDate(d);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isError" id="apidoc.element.elasticsearch-odm.utils.isError">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isError
        <span class="apidocSignatureSpan">(e)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isError(e) {
  return exports.objectToString(e) === '[object Error]' || e instanceof Error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isFloat" id="apidoc.element.elasticsearch-odm.utils.isFloat">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isFloat
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isFloat(v){
  //return expressions.float.test(v) &amp;&amp; !isNaN(parseFloat(v)) &amp;&amp; (v%1!=0);
  // Removed previous line because we need logic to allow numbers without decimals, eg '2' should still be a valid float
  // Adding temp workaround to allow all numbers as valid floats for now (elasticsearch can coherce anyways)
   return typeof v === "number";
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isFunction" id="apidoc.element.elasticsearch-odm.utils.isFunction">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isFunction
        <span class="apidocSignatureSpan">(arg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isFunction(arg) {
  return typeof arg === 'function';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isISO8601" id="apidoc.element.elasticsearch-odm.utils.isISO8601">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isISO8601
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isISO8601(v) {
  return expressions.iso8601.test(v);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isInteger" id="apidoc.element.elasticsearch-odm.utils.isInteger">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isInteger
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isInteger(v){
  return typeof v === "number" &amp;&amp; isFinite(v) &amp;&amp; Math.floor(v) === v &amp;&amp; inRange(v, -2147483648, 2147483647);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isLong" id="apidoc.element.elasticsearch-odm.utils.isLong">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isLong
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isLong(v){
  return typeof v === "number" &amp;&amp; isFinite(v) &amp;&amp; Math.floor(v) === v &amp;&amp; inRange(v, -9223372036854775808, 9223372036854775807);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isNull" id="apidoc.element.elasticsearch-odm.utils.isNull">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isNull
        <span class="apidocSignatureSpan">(arg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isNull(arg) {
  return arg === null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isNullOrUndefined" id="apidoc.element.elasticsearch-odm.utils.isNullOrUndefined">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isNullOrUndefined
        <span class="apidocSignatureSpan">(arg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isNullOrUndefined(arg) {
  return arg === null || arg === undefined;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isNumber" id="apidoc.element.elasticsearch-odm.utils.isNumber">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isNumber
        <span class="apidocSignatureSpan">(arg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isNumber(arg) {
  return typeof arg === 'number';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isObject" id="apidoc.element.elasticsearch-odm.utils.isObject">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isObject
        <span class="apidocSignatureSpan">(arg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isObject(arg) {
  return arg !== null &amp;&amp; typeof arg === 'object';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

function connect(options){
if(isConnected()) return Promise.resolve();

// can pass just the index name, or a client configuration object.
if(_.isString(options)){
  db.index = options;
}else if(_.<span class="apidocCodeKeywordSpan">isObject</span>(options)){
  if(!options.index) return Promise.reject(new MissingArgumentError('options.index'));
  if(options.hasOwnProperty('syncMapping')){
    syncMapping = options.syncMapping;
    delete options.syncMapping;
  }
  db = _.assign(db, options);
}else{
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isPrimitive" id="apidoc.element.elasticsearch-odm.utils.isPrimitive">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isPrimitive
        <span class="apidocSignatureSpan">(arg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isPrimitive(arg) {
  return arg === null ||
         typeof arg !== 'object' &amp;&amp; typeof arg !== 'function';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isRegExp" id="apidoc.element.elasticsearch-odm.utils.isRegExp">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isRegExp
        <span class="apidocSignatureSpan">(re)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isRegExp(re) {
  return binding.isRegExp(re);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isShort" id="apidoc.element.elasticsearch-odm.utils.isShort">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isShort
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isShort(v){
  return isInteger(v) &amp;&amp; inRange(v, -32768, 32767);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isString" id="apidoc.element.elasticsearch-odm.utils.isString">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isString
        <span class="apidocSignatureSpan">(arg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isString(arg) {
  return typeof arg === 'string';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
};

function connect(options){
if(isConnected()) return Promise.resolve();

// can pass just the index name, or a client configuration object.
if(_.<span class="apidocCodeKeywordSpan">isString</span>(options)){
  db.index = options;
}else if(_.isObject(options)){
  if(!options.index) return Promise.reject(new MissingArgumentError('options.index'));
  if(options.hasOwnProperty('syncMapping')){
    syncMapping = options.syncMapping;
    delete options.syncMapping;
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isSymbol" id="apidoc.element.elasticsearch-odm.utils.isSymbol">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isSymbol
        <span class="apidocSignatureSpan">(arg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isSymbol(arg) {
  return typeof arg === 'symbol';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.isUndefined" id="apidoc.element.elasticsearch-odm.utils.isUndefined">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>isUndefined
        <span class="apidocSignatureSpan">(arg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isUndefined(arg) {
  return arg === undefined;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.log" id="apidoc.element.elasticsearch-odm.utils.log">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>log
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">log = function () {
  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var Car = elasticsearch.model('Car');
var car = new Car({
  type: 'Ford', color: 'Black'
});
elasticsearch.connect('my-index').then(function(){
  // be sure to call connect before bootstrapping your app.
  car.save().then(function(document){
    console.<span class="apidocCodeKeywordSpan">log</span>(document);
  });
});
```
Example (using a [schema](#schemas)):

```js
var elasticsearch = require('elasticsearch-odm');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.print" id="apidoc.element.elasticsearch-odm.utils.print">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>print
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function deprecated() {
  warned = exports.printDeprecationMessage(msg, warned, deprecated);
  if (new.target) {
    return Reflect.construct(fn, arguments, new.target);
  }
  return fn.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.elasticsearch-odm.utils.puts" id="apidoc.element.elasticsearch-odm.utils.puts">
        function <span class="apidocSignatureSpan">elasticsearch-odm.utils.</span>puts
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function deprecated() {
  warned = exports.printDeprecationMessage(msg, warned, deprecated);
  if (new.target) {
    return Reflect.construct(fn, arguments, new.target);
  }
  return fn.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>